/*! jsSIP v@0.1.0 jssip.net | jssip.net/license */
(function(a){var b=function(){var a="JsSIP",b="712",c="0.1.0";return{name:function(){return a},version:function(){return c},svn_revision:function(){return b}}}();b.EventEmitter=function(){},b.EventEmitter.prototype={initEvents:function(a){var c=a.length;this.events={},this.onceNotFired=[],this.maxListeners=10,this.events.newListener=function(a){console.log(b.c.LOG_EVENT_EMITTER+"new Listener added to event: "+a)};while(c--)console.log(b.c.LOG_EVENT_EMITTER+"Adding event: "+a[c]),this.events[a[c]]=[]},checkEvent:function(a){return this.events[a]?!0:(console.log(b.c.LOG_EVENT_EMITTER+"No event named: "+a),!1)},addListener:function(a,c){if(!this.checkEvent(a))return;this.events[a].length>=this.maxListeners&&console.log(b.c.LOG_EVENT_EMITTER+"Max Listeners exceeded for event: "+a),this.events[a].push(c),this.events.newListener.call(null,a)},on:function(a,b){this.addListener(a,b)},once:function(a,b){this.events[a].unshift(b),this.onceNotFired.push(a)},removeListener:function(a,b){if(!this.checkEvent(a))return;var c=this.events[a],d=0,e=c.length;while(d<e)c[d]&&c[d].toString()===b.toString()?c.splice(d,1):d++},removeAllListener:function(a){if(!this.checkEvent(a))return;this.events[a]=[]},setMaxListeners:function(a){Number(a)&&(this.maxListeners=a)},listeners:function(a){return this.events[a]},emit:function(a,c){var d,e,f=0;if(!this.checkEvent(a))return;console.log(b.c.LOG_EVENT_EMITTER+"Emitting event: "+a),d=this.events[a],e=d.length;if(c)for(f;f<e;f++)d[f].apply(null,c);else for(f;f<e;f++)d[f].call();f=this.onceNotFired.indexOf(a),f!==-1&&(this.onceNotFired.splice(f,1),this.events[a].shift())},newListener:function(a){this.events.newListener=a}},b.c={USER_AGENT:b.name()+" "+b.version(),LOG_PARSER:b.name()+" | "+"PARSER"+" | ",LOG_DIGEST_AUTHENTICATION:b.name()+" | "+"DIGEST AUTHENTICATION"+" | ",LOG_SANITY_CHECK:b.name()+" | "+"SANITY CHECK"+" | ",LOG_UTILS:b.name()+" | "+"UTILS"+" | ",LOG_TRANSPORT:b.name()+" | "+"TRANSPORT"+" | ",LOG_TRANSACTION:b.name()+" | "+"TRANSACTION"+" | ",LOG_DIALOG:b.name()+" | "+"DIALOG"+" | ",LOG_UA:b.name()+" | "+"UA"+" | ",LOG_INVITE_SESSION:b.name()+" | "+"INVITE SESSION"+" | ",LOG_CLIENT_INVITE_SESSION:b.name()+" | "+"CLIENT INVITE SESSION"+" | ",LOG_SERVER_INVITE_SESSION:b.name()+" | "+"SERVER INVITE SESSION"+" | ",LOG_EVENT_EMITTER:b.name()+" | "+"EVENT EMITTER"+" | ",LOG_MEDIA_SESSION:b.name()+" | "+"MEDIA SESSION"+" | ",LOG_MESSAGE:b.name()+" | "+"MESSAGE"+" | ",LOG_MESSAGE_RECEIVER:b.name()+" | "+"MESSAGE_RECEIVER"+" | ",LOG_MESSAGE_SENDER:b.name()+" | "+"MESSAGE_SENDER"+" | ",LOG_REGISTRATOR:b.name()+" | "+"REGISTRATOR"+" | ",LOG_REQUEST_SENDER:b.name()+" | "+"REQUEST SENDER"+" | ",LOG_SUBSCRIBER:b.name()+" | "+"SUBSCRIBER"+" | ",LOG_PRESENCE:b.name()+" | "+"PRESENCE"+" | ",LOG_MESSAGE_SUMMARY:b.name()+" | "+"MESSAGE_SUMMARY"+" | ",TRANSACTION_TRYING:1,TRANSACTION_PROCEEDING:2,TRANSACTION_CALLING:3,TRANSACTION_ACCEPTED:4,TRANSACTION_COMPLETED:5,TRANSACTION_TERMINATED:6,TRANSACTION_CONFIRMED:7,DIALOG_EARLY:1,DIALOG_CONFIRMED:2,SESSION_NULL:0,SESSION_INVITE_SENT:1,SESSION_1XX_RECEIVED:2,SESSION_INVITE_RECEIVED:3,SESSION_WAITING_FOR_ANSWER:4,SESSION_WAITING_FOR_ACK:5,SESSION_CANCELED:6,SESSION_TERMINATED:7,SESSION_CONFIRMED:8,TRANSPORT_ERROR:1,REQUEST_TIMEOUT:2,SESSION_TERMINATE_USER_TERMINATED:"USER_TERMINATED",SESSION_TERMINATE_USER_CANCELED:"USER_CANCELED",SESSION_TERMINATE_USER_DENIED_MEDIA_ACCESS:"USER_DENIED_MEDIA_ACCES",SESSION_TERMINATE_PEER_TERMINATED:"PEER_TERMINATED",SESSION_TERMINATE_BAD_MEDIA_DESCRIPTION:"BAD_MEDIA_DESCRIPTION",SESSION_TERMINATE_NO_ACK_RECEIVED:"NO_ACK_RECEIVED",SESSION_TERMINATE_EXPIRES_TIMEOUT:"EXPIRES_TIMEOUT",SESSION_TERMINATE_USER_NO_ANSWER_TIMEOUT:"USER_NO_ANSWER_TIMEOUT",SESSION_TERMINATE_IN_DIALOG_408_480:"IN_DIALOG_408_480",UA_STATUS_INIT:0,UA_STATUS_READY:1,UA_STATUS_USER_CLOSED:2,UA_STATUS_NOT_READY:3,UA_CONFIGURATION_ERROR:1,UA_NETWORK_ERROR:2,WS_SERVER_READY:0,WS_SERVER_DISCONNECTED:1,WS_SERVER_ERROR:2,ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",REASON_100:"Trying",REASON_180:"Ringing",REASON_181:"Call Is Being Forwarded",REASON_182:"Queued",REASON_183:"Session Progress",REASON_200:"OK",REASON_300:"Multiple Choices",REASON_301:"Moved Permanently",REASON_302:"Moved Temporarily",REASON_305:"Use Proxy",REASON_380:"Alternative Service",REASON_400:"Bad Request",REASON_401:"Unauthorized",REASON_402:"Payment Required",REASON_403:"Forbidden",REASON_404:"Not Found",REASON_405:"Method Not Allowed",REASON_406:"Not Acceptable",REASON_407:"Proxy Authentication Required ",REASON_408:"Request Timeout",REASON_410:"Gone",REASON_413:"Request Entity Too Large",REASON_414:"Request-URI Too Long",REASON_415:"Unsupported Media Type",REASON_416:"Unsupported URI Scheme",REASON_420:"Bad Extension",REASON_421:"Extension Required",REASON_423:"Interval Too Brief",REASON_480:"Temporarily Unavailable",REASON_481:"Call/Transaction Does Not Exist",REASON_482:"Loop Detected",REASON_483:"Too Many Hops",REASON_484:"Address Incomplete",REASON_485:"Ambiguous",REASON_486:"Busy Here",REASON_487:"Request Terminated",REASON_488:"Not Acceptable Here",REASON_491:"Request Pending ",REASON_493:"Undecipherable",REASON_500:"Server Internal Error",REASON_501:"Not Implemented",REASON_502:"Bad Gateway",REASON_503:"Service Unavailable",REASON_504:"Server Time-out",REASON_505:"Version Not Supported",REASON_513:"Message Too Large",REASON_600:"Busy Everywhere",REASON_603:"Decline",REASON_604:"Does Not Exist Anywhere",MAX_FORWARDS:69,ALLOWED_METHODS:"INVITE, ACK, CANCEL, BYE, OPTIONS, MESSAGE, SUBSCRIBE",SUPPORTED:"path, outbound, gruu",ACCEPTED_BODY_TYPES:"application/sdp",TAG_LENGTH:10},b.exceptions={ConfigurationError:function(){var a=function(){this.code=1,this.name="CONFIGURATION_ERROR",this.message=this.name+": JsSIP Exception "+this.code};return a.prototype=new Error,a}(),NotReadyError:function(){var a=function(){this.code=2,this.name="NOT_READY_ERROR",this.message=this.name+": JsSIP Exception "+this.code};return a.prototype=new Error,a}(),InvalidTargetError:function(){var a=function(){this.code=3,this.name="INVALID_TARGET_ERROR",this.message=this.name+": JsSIP Exception "+this.code};return a.prototype=new Error,a}(),WebRtcNotSupportedError:function(){var a=function(){this.code=4,this.name="WEBRTC_NO_SUPPORTED_ERROR",this.message=this.name+": JsSIP Exception "+this.code};return a.prototype=new Error,a}()},b.Timers=function(){var a=500,b=4e3,c=5e3;return{T1:a,T2:b,T4:c,TIMER_B:64*a,TIMER_D:0*a,TIMER_F:64*a,TIMER_H:64*a,TIMER_I:0*a,TIMER_J:0*a,TIMER_K:0*c,TIMER_L:64*a,TIMER_M:64*a}}(),b.Transport=function(a,b){this.ua=a,this.ws=null,this.server=b,this.reconnection_attempts=0,this.ua_closed=!1,this.connected=!1,this.reconnectTimer=null,this.ua.transport=this,this.connect()},b.Transport.prototype={send:function(a){if(this.ws&&this.ws.readyState===WebSocket.OPEN){var c=a.toString();return console.info(b.c.LOG_TRANSPORT+"Sending WebSocket message: \n\n"+c+"\n"),this.ws.send(c),!0}return console.info(b.c.LOG_TRANSPORT+"Unable to send message. WebSocket is not open\n\n"),!1},disconnect:function(){this.ws&&(this.ua_closed=!0,console.log(b.c.LOG_TRANSPORT+"closing WebSocket connection "+this.server.ws_uri),this.ws.close())},connect:function(){var a=this;if(!(!this.ws||this.ws.readyState!==WebSocket.OPEN&&this.ws.readyState!==WebSocket.CONNECTING))return console.log(b.c.LOG_TRANSPORT+"WebSocket "+this.server.ws_uri+" is already connected"),!1;this.ws&&this.ws.close(),console.log(b.c.LOG_TRANSPORT+"Connecting to WebSocket URI "+this.server.ws_uri);try{this.ws=new WebSocket(this.server.ws_uri,"sip")}catch(c){console.log(b.c.LOG_TRANSPORT+"Error connecting to "+this.server.ws_uri+": "+c)}this.ws.binaryType="arraybuffer",this.ws.onopen=function(b){a.onOpen(b)},this.ws.onclose=function(b){a.onClose(b)},this.ws.onmessage=function(b){a.onMessage(b)},this.ws.onerror=function(b){a.onError(b)}},onOpen:function(c){this.connected=!0,console.log(b.c.LOG_TRANSPORT+"WebSocket connected: "+this.server.ws_uri),a.clearTimeout(this.reconnectTimer),this.ua_closed=!1,this.ua.onTransportConnected(this)},onClose:function(a){var c=this.connected;this.connected=!1,console.warn(b.c.LOG_TRANSPORT+"WebSocket disconnected: code="+a.code+(a.reason?", reason="+a.reason:"")),a.wasClean===!1&&console.log(b.c.LOG_TRANSPORT+"ERROR: abrupt disconection"),c===!0?(this.ua.onTransportClosed(this),this.ua_closed||(this.reconnection_attempts=0,this.reConnect())):this.ua.onTransportError(this)},onMessage:function(a){var c,d,e=a.data;console.info(b.c.LOG_TRANSPORT+"Received WebSocket message: \n\n"+e+"\n");if(e==="\r\n")return;if(typeof e!="string"){console.info(b.c.LOG_TRANSPORT+"Binary data received. Ignoring message\n");return}c=b.Parser.parseMessage(e);if(this.ua.status===b.c.UA_STATUS_USER_CLOSED&&c instanceof b.IncomingRequest)return;if(c&&b.sanityCheck(c,this.ua,this))if(c instanceof b.IncomingRequest)c.transport=this,this.ua.receiveRequest(c);else if(c instanceof b.IncomingResponse)switch(c.method){case b.c.INVITE:d=this.ua.transactions.ict[c.via_branch],d&&d.receiveResponse(c);break;case b.c.ACK:break;default:d=this.ua.transactions.nict[c.via_branch],d&&d.receiveResponse(c)}},onError:function(a){console.log(b.c.LOG_TRANSPORT+"WebSocket connection error")},reConnect:function(){var c=this;this.reconnection_attempts+=1,this.reconnection_attempts>this.ua.configuration.max_reconnection?(console.log(b.c.LOG_TRANSPORT+"Maximum reconnection attempts for: "+this.server.ws_uri),this.ua.onTransportError(this)):(console.log(b.c.LOG_TRANSPORT+"Trying to reconnect to: "+this.server.ws_uri+". Reconnection attempt number "+this.reconnection_attempts),this.reconnectTimer=a.setTimeout(function(){c.reConnect()},this.ua.configuration.reconnection_timeout*1e3),this.connect())}},b.Parser=function(){function a(a,b){var c=b,d=0,e=0;if(a.substring(c,c+2).match(/(^\r\n)/))return-2;while(d===0)e=a.indexOf("\r\n",c),!a.substring(e+2,e+4).match(/(^\r\n)/)&&a.charAt(e+2).match(/(^\s+)/)?c=e+2:d=e;return d}function c(a,c,d,e){var f,g,h,i,j=c.indexOf(":",d),k=c.substring(d,j).replace(/\s+/,""),l=c.substring(j+1,e);l=l.replace(/^\s+/g,"").replace(/\s+$/g,"");switch(k.toLowerCase()){case"via":case"v":a.addHeader("via",l),a.countHeader("via")===1?(i=a.parseHeader("Via"),i&&(a.via=i,a.via_branch=i.branch)):i=0;break;case"from":case"f":a.setHeader("from",l),i=a.parseHeader("from"),i&&(a.from=l,a.from_tag=i.tag);break;case"to":case"t":a.setHeader("to",l),i=a.parseHeader("to"),i&&(a.to=l,a.to_tag=i.tag);break;case"record-route":f=l.split(","),g=f.length,i=0;for(h=0;h<g;h++)a.addHeader("record-route",f[h]);break;case"call-id":case"i":a.setHeader("call-id",l),i=a.parseHeader("call-id"),i&&(a.call_id=l);break;case"contact":case"m":f=l.split(","),g=f.length;for(h=0;h<g;h++)a.addHeader("contact",f[h]),i=a.parseHeader("contact",h);break;case"content-length":case"l":a.setHeader("content-length",l),i=a.parseHeader("content-length");break;case"content-type":case"c":a.setHeader("content-type",l),i=a.parseHeader("content-type");break;case"cseq":a.setHeader("cseq",l),i=a.parseHeader("cseq"),i&&(a.cseq=i.value),a instanceof b.IncomingResponse&&(a.method=i.method);break;case"max-forwards":a.setHeader("max-forwards",l),i=a.parseHeader("max-forwards");break;case"www-authenticate":a.setHeader("www-authenticate",l),i=a.parseHeader("www-authenticate");break;case"proxy-authenticate":a.setHeader("proxy-authenticate",l),i=a.parseHeader("proxy-authenticate");break;default:a.setHeader(k,l),i=0}if(i===undefined)return{header_name:k,header_value:l}}function d(d){var e,f,g,h,i,j=0,k=d.indexOf("\r\n");k===-1&&console.log(b.c.LOG_PARSER+"No CRLF found. Not a SIP message."),f=d.substring(0,k),i=b.grammar_sip.parse(f,"Request_Response");if(i===-1){console.log(b.c.LOG_PARSER+'Error parsing first line of SIP message: "'+f+'"');return}i.status_code?(e=new b.IncomingResponse,e.status_code=i.status_code,e.reason_phrase=i.reason_phrase):(e=new b.IncomingRequest,e.method=i.method,e.ruri=i),e.msg=d,j=k+2;for(;;){k=a(d,j);if(k===-2){h=j+2;break}if(k===-1)return;i=c(e,d,j,k);if(i){console.log(b.c.LOG_PARSER+'Error parsing "'+i.header_name+'" header field with value: "'+i.header_value+'"');return}j=k+2}return e.hasHeader("content-length")?(g=e.getHeader("content-length"),e.body=d.substr(h,g)):e.body=d.substring(h),e}return{parseMessage:d}}(),b.OutgoingRequest=function(a,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r;e=e||{},f=f||{};if(!a||!c||!d)return null;this.headers={},this.method=a,this.ruri=c,this.body=g,this.setHeader("route",d.transport.server.sip_uri),this.setHeader("via",""),this.setHeader("max-forwards",b.c.MAX_FORWARDS),h=e.to_display_name?'"'+e.to_display_name+'" ':"",i=e.to_uri||c,j=e.to_tag?";tag="+e.to_tag:"",k=h?"<"+i+">":i,k+=j,this.setHeader("to",k),l=e.from_display_name||d.configuration.display_name||"",m=e.from_uri||d.configuration.from_uri,n=e.from_tag||b.utils.newTag(),o=l?'"'+l+'" ':"",o+=l?"<"+m+">":m,o+=";tag="+n,this.setHeader("from",o),e.call_id?p=e.call_id:p=d.configuration.jssip_id+Math.random().toString(36).substr(2,15),this.setHeader("call-id",p),q=e.cseq||Math.floor(Math.random()*1e4),q=q+" "+a,this.setHeader("cseq",q);for(r in f)this.setHeader(r,f[r])},b.OutgoingRequest.prototype={setHeader:function(a,c){this.headers[b.utils.headerize(a)]=c instanceof Array?c:[c]},toString:function(){var a="",c,d,e;a+=this.method+" "+this.ruri+" SIP/2.0\r\n";for(c in this.headers)for(e in this.headers[c])a+=c+": "+this.headers[c][e]+"\r\n";return a+="Supported: "+b.c.SUPPORTED+"\r\n",a+="User-Agent: "+b.c.USER_AGENT+"\r\n",this.body?(d=b.utils.str_utf8_length(this.body),a+="Content-Length: "+d+"\r\n\r\n",a+=this.body):a+="\r\n",a}},b.IncomingMessage=function(){this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null},b.IncomingMessage.prototype={addHeader:function(a,c){var d={raw:c};a=b.utils.headerize(a),this.headers[a]?this.headers[a].push(d):this.headers[a]=[d]},countHeader:function(a){var c=this.headers[b.utils.headerize(a)];return c?c.length:0},getHeader:function(a,c){var d=this.headers[b.utils.headerize(a)];c=c||0;if(!d)return;if(d[c])return d[c].raw},getHeaderAll:function(a){var c,d=this.headers[b.utils.headerize(a)],e=[];if(!d)return[];for(c in d)e.push(d[c].raw);return e},getHeaderUri:function(a,c){var d=this.headers[b.utils.headerize(a)];c=c||0;if(!d)return;if(d[c]&&d[c].parsed&&d[c].parsed.uri)return d[c].parsed.uri},hasHeader:function(a){return this.headers[b.utils.headerize(a)]?!0:!1},parseHeader:function(a,c){var d,e,f;a=b.utils.headerize(a),c=c||0;if(!this.headers[a]){console.info(b.c.LOG_MESSAGE+'Header "'+a+'" not present');return}if(c>=this.headers[a].length){console.info(b.c.LOG_MESSAGE+'Not so many "'+a+'" headers present');return}d=this.headers[a][c],e=d.raw;if(d.parsed)return d.parsed;a=a.replace(/-/g,"_"),f=b.grammar_sip.parse(e,a);if(f===-1){this.headers[a].splice(c,1),console.error(b.c.LOG_MESSAGE+"Error parsing Header "+a+':"'+e+'"');return}return d.parsed=f,f},s:function(a,b){return this.parseHeader(a,b)},setHeader:function(a,c){var d={raw:c};this.headers[b.utils.headerize(a)]=[d]}},b.IncomingRequest=function(){var a=function(){this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null};return a.prototype=new b.IncomingMessage,a.prototype.reply=function(a,c,d,e,f,g){var h,i,j,k,l="SIP/2.0 "+a+" "+c+"\r\n",m=this.to,n=0,o=0;if(this.method===b.c.INVITE&&a>100&&a<=200){h=this.countHeader("record-route");for(n;n<h;n++)l+="Record-Route: "+this.getHeader("record-route",n)+"\r\n"}i=this.countHeader("via");for(o;o<i;o++)l+="Via: "+this.getHeader("via",o)+"\r\n";l+="Max-Forwards: "+b.c.MAX_FORWARDS+"\r\n",a!==100&&!this.to_tag?m+=";tag="+b.utils.newTag():this.to_tag&&!this.s("to").tag&&(m+=";tag="+this.to_tag),l+="To: "+m+"\r\n",l+="From: "+this.from+"\r\n",l+="Call-ID: "+this.call_id+"\r\n",l+="CSeq: "+this.cseq+" "+this.method+"\r\n";for(j in d)l+=j+": "+d[j]+"\r\n";e?(k=b.utils.str_utf8_length(e),l+="Content-Type: application/sdp\r\n",l+="Content-Length: "+k+"\r\n\r\n",l+=e):l+="\r\n",this.server_transaction.receiveResponse(a,l,f,g)},a.prototype.reply_sl=function(a,c){var d,e="SIP/2.0 "+a+" "+c+"\r\n",f=this.countHeader("via");for(var g=0;g<f;g++)e+="Via: "+this.getHeader("via",g)+"\r\n";d=this.to,this.to_tag||(d+=";tag="+b.utils.newTag()),e+="To: "+d+"\r\n",e+="From: "+this.from+"\r\n",e+="Call-ID: "+this.call_id+"\r\n",e+="CSeq: "+this.cseq+" "+this.method+"\r\n\r\n",this.transport.send(e)},a}(),b.IncomingResponse=function(){var a=function(){this.headers={},this.response_code=null,this.reason_phrase=null};return a.prototype=new b.IncomingMessage,a}();var c=function(){this.init=function(a,b,c){var d;this.transport=c,this.id="z9hG4bK"+Math.floor(Math.random()*1e7),this.request_sender=a,this.request=b,d=a.ua.configuration.via_core_value+";branch="+this.id,this.request.setHeader("via",d)}},d=function(){this.send=function(){var c=this;this.state=b.c.TRANSACTION_TRYING,this.F=a.setTimeout(function(){c.timer_F()},b.Timers.TIMER_F),this.transport.send(this.request)||this.onTransportError()},this.onTransportError=function(){console.log(b.c.LOG_TRANSACTION+"Transport Error ocurred. Deleting non invite client transaction: "+this.id),a.clearTimeout(this.F),a.clearTimeout(this.K),delete this.request_sender.ua.transactions.nict[this.id],this.request_sender.onTransportError()},this.timer_F=function(){console.log(b.c.LOG_TRANSACTION+"Timer F expired "+this.id),this.state=b.c.TRANSACTION_TERMINATED,this.request_sender.onRequestTimeout(),delete this.request_sender.ua.transactions.nict[this.id]},this.timer_K=function(){this.state=b.c.TRANSACTION_TERMINATED,delete this.request_sender.ua.transactions.nict[this.id]},this.receiveResponse=function(c){var d=this,e=c.status_code;if(e<200)switch(this.state){case b.c.TRANSACTION_TRYING:case b.c.TRANSACTION_PROCEEDING:this.state=b.c.TRANSACTION_PROCEEDING,this.request_sender.receiveResponse(c)}else switch(this.state){case b.c.TRANSACTION_TRYING:case b.c.TRANSACTION_PROCEEDING:this.state=b.c.TRANSACTION_COMPLETED,a.clearTimeout(this.F),e===408?this.request_sender.onRequestTimeout():this.request_sender.receiveResponse(c),this.K=a.setTimeout(function(){d.timer_K()},b.Timers.TIMER_K);break;case b.c.TRANSACTION_COMPLETED:}}};d.prototype=new c;var e=function(){this.send=function(){var c=this;this.state=b.c.TRANSACTION_CALLING,this.B=a.setTimeout(function(){c.timer_B()},b.Timers.TIMER_B),this.transport.send(this.request)||this.onTransportError()},this.onTransportError=function(){console.log(b.c.LOG_TRANSACTION+"Transport Error ocurred. Deleting invite client transaction: "+this.id),a.clearTimeout(this.B),a.clearTimeout(this.D),a.clearTimeout(this.M),delete this.request_sender.ua.transactions.ict[this.id],this.request_sender.onTransportError()},this.timer_M=function(){console.log(b.c.LOG_TRANSACTION+"Timer M expired "+this.id),this.state===b.c.TRANSACTION_ACCEPTED&&(this.state=b.c.TRANSACTION_TERMINATED,a.clearTimeout(this.B),delete this.request_sender.ua.transactions.ict[this.id])},this.timer_B=function(){console.log(b.c.LOG_TRANSACTION+"Timer B expired "+this.id),this.state===b.c.TRANSACTION_CALLING&&(this.state=b.c.TRANSACTION_TERMINATED,this.request_sender.onRequestTimeout(),delete this.request_sender.ua.transactions.ict[this.id])},this.timer_D=function(){console.log(b.c.LOG_TRANSACTION+"Timer D expired "+this.id),this.state=b.c.TRANSACTION_TERMINATED,a.clearTimeout(this.B),delete this.request_sender.ua.transactions.ict[this.id]},this.sendACK=function(c){var d=this;this.ack="ACK "+this.request.ruri+" SIP/2.0\r\n",this.ack+="Via: "+this.request.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.ack+="Route: "+this.request.headers.Route.toString()+"\r\n"),this.ack+="To: "+c.getHeader("to")+"\r\n",this.ack+="From: "+this.request.headers.From.toString()+"\r\n",this.ack+="Call-ID: "+this.request.headers["Call-ID"].toString()+"\r\n",this.ack+="CSeq: "+this.request.headers.CSeq.toString().split(" ")[0],this.ack+=" ACK\r\n\r\n",this.D=a.setTimeout(function(){d.timer_D()},b.Timers.TIMER_D),this.transport.send(this.ack)},this.cancel_request=function(a,c){var d=a.request;this.cancel=b.c.CANCEL+" "+d.ruri+" SIP/2.0\r\n",this.cancel+="Via: "+d.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.cancel+="Route: "+d.headers.Route.toString()+"\r\n"),this.cancel+="To: "+d.headers.To.toString()+"\r\n",this.cancel+="From: "+d.headers.From.toString()+"\r\n",this.cancel+="Call-ID: "+d.headers["Call-ID"].toString()+"\r\n",this.cancel+="CSeq: "+d.headers.CSeq.toString().split(" ")[0]+" CANCEL\r\n",c&&(this.cancel+="Reason:SIP ;cause=200 ;text="+c+"\r\n"),this.cancel+="Content-Length: 0\r\n\r\n",this.state===b.c.TRANSACTION_PROCEEDING&&this.transport.send(this.cancel)},this.receiveResponse=function(c){var d=this,e=c.status_code;if(e>=100&&e<=199)switch(this.state){case b.c.TRANSACTION_CALLING:this.state=b.c.TRANSACTION_PROCEEDING,this.request_sender.receiveResponse(c),this.cancel&&this.transport.send(this.cancel);break;case b.c.TRANSACTION_PROCEEDING:this.request_sender.receiveResponse(c)}else if(e>=200&&e<=299)switch(this.state){case b.c.TRANSACTION_CALLING:case b.c.TRANSACTION_PROCEEDING:this.state=b.c.TRANSACTION_ACCEPTED,this.M=a.setTimeout(function(){d.timer_M()},b.Timers.TIMER_M),this.request_sender.receiveResponse(c);break;case b.c.TRANSACTION_ACCEPTED:this.request_sender.receiveResponse(c)}else if(e>=300&&e<=699)switch(this.state){case b.c.TRANSACTION_CALLING:case b.c.TRANSACTION_PROCEEDING:this.state=b.c.TRANSACTION_COMPLETED,this.sendACK(c),this.request_sender.receiveResponse(c);break;case b.c.TRANSACTION_COMPLETED:this.sendACK(c)}}};e.prototype=new c;var f=function(){this.init=function(a,b){this.id=a.via_branch,this.request=a,this.transport=a.transport,this.ua=b,this.last_response="",a.server_transaction=this}},g=function(){this.timer_J=function(){console.log(b.c.LOG_TRANSACTION+"Timer J expired "+this.id),this.state=b.c.TRANSACTION_TERMINATED,delete this.ua.transactions.nist[this.id]},this.onTransportError=function(){this.transportError||(this.transportError=!0,console.log(b.c.LOG_TRANSACTION+"Transport Error ocurred. Deleting non invite server transaction: "+this.id),a.clearTimeout(this.J),delete this.ua.transactions.nist[this.id])},this.receiveResponse=function(c,d,e,f){var g=this;if(c===100)switch(this.state){case b.c.TRANSACTION_TRYING:this.state=b.c.TRANSACTION_PROCEEDING,this.transport.send(d)||this.onTransportError();break;case b.c.TRANSACTION_PROCEEDING:this.last_response=d,this.transport.send(d)?e&&e():(this.onTransportError(),f&&f())}else if(c>=200&&c<=699)switch(this.state){case b.c.TRANSACTION_TRYING:case b.c.TRANSACTION_PROCEEDING:this.state=b.c.TRANSACTION_COMPLETED,this.last_response=d,this.J=a.setTimeout(function(){g.timer_J()},b.Timers.TIMER_J),this.transport.send(d)?e&&e():(this.onTransportError(),f&&f());break;case b.c.TRANSACTION_COMPLETED:}}};g.prototype=new f;var h=function(){this.timer_H=function(){console.log(b.c.LOG_TRANSACTION+"Timer H expired "+this.id),this.state===b.c.TRANSACTION_COMPLETED&&(console.log(b.c.LOG_TRANSACTION+"transactions","ACK for ist was never received. Call will be terminated"),this.state=b.c.TRANSACTION_TERMINATED),delete this.ua.transactions.ist[this.id]},this.timer_I=function(){this.state=b.c.TRANSACTION_TERMINATED,delete this.ua.transactions.ist[this.id]},this.timer_L=function(){console.log(b.c.LOG_TRANSACTION+"Timer L expired "+this.id),this.state===b.c.TRANSACTION_ACCEPTED&&(this.state=b.c.TRANSACTION_TERMINATED,delete this.ua.transactions.ist[this.id])},this.onTransportError=function(){this.transportError||(this.transportError=!0,console.log(b.c.LOG_TRANSACTION+"Transport Error ocurred. Deleting invite server transaction: "+this.id),a.clearTimeout(this.reliableProvisionalTimer),a.clearTimeout(this.L),a.clearTimeout(this.H),a.clearTimeout(this.I),delete this.ua.transactions.ist[this.id])},this.timer_reliableProvisional=function(c){var d=this,e=this.last_response,f=b.Timers.T1*Math.pow(2,c+1);c>8?a.clearTimeout(this.reliableProvisionalTimer):(c+=1,this.transport.send(e)||this.onTransportError(),this.reliableProvisionalTimer=a.setTimeout(function(){d.timer_reliableProvisional(c)},f))},this.receiveResponse=function(c,d,e,f){var g=this;if(c>=100&&c<=199)switch(this.state){case b.c.TRANSACTION_PROCEEDING:this.transport.send(d)||this.onTransportError(),this.last_response=d}if(c>100&&c<=199)this.reliableProvisionalTimer||(this.reliableProvisionalTimer=a.setTimeout(function(){g.timer_reliableProvisional(1)},b.Timers.T1));else if(c>=200&&c<=299)switch(this.state){case b.c.TRANSACTION_PROCEEDING:this.state=b.c.TRANSACTION_ACCEPTED,this.last_response=d,this.L=a.setTimeout(function(){g.timer_L()},b.Timers.TIMER_L),a.clearTimeout(this.reliableProvisionalTimer);case b.c.TRANSACTION_ACCEPTED:this.transport.send(d)?e&&e():(this.onTransportError(),f&&f())}else if(c>=300&&c<=699)switch(this.state){case b.c.TRANSACTION_PROCEEDING:a.clearTimeout(this.reliableProvisionalTimer),this.transport.send(d)?(this.state=b.c.TRANSACTION_COMPLETED,this.H=a.setTimeout(function(){g.timer_H()},b.Timers.TIMER_H),e&&e()):(this.onTransportError(),f&&f())}}};h.prototype=new f,b.Transactions={},b.Transactions.NonInviteClientTransaction=function(a,b,c){this.init(a,b,c),this.request_sender.ua.transactions.nict[this.id]=this},b.Transactions.NonInviteClientTransaction.prototype=new d,b.Transactions.InviteClientTransaction=function(a,b,c){var d=this;this.init(a,b,c),this.request_sender.ua.transactions.ict[this.id]=this,this.request.cancel=function(a){d.cancel_request(d,a)}},b.Transactions.InviteClientTransaction.prototype=new e,b.Transactions.AckClientTransaction=function(a,b,c){this.init(a,b,c),this.send=function(){this.transport.send(b)}},b.Transactions.AckClientTransaction.prototype=new d,b.Transactions.NonInviteServerTransaction=function(a,c){this.init(a,c),this.state=b.c.TRANSACTION_TRYING,c.transactions.nist[this.id]=this},b.Transactions.NonInviteServerTransaction.prototype=new g,b.Transactions.InviteServerTransaction=function(a,c){this.init(a,c),this.state=b.c.TRANSACTION_PROCEEDING,c.transactions.ist[this.id]=this,this.reliableProvisionalTimer=null,a.reply(100,b.c.REASON_100)},b.Transactions.InviteServerTransaction.prototype=new h,b.Transactions.checkTransaction=function(c,d){var e;switch(d.method){case b.c.INVITE:e=c.transactions.ist[d.via_branch];if(e){switch(e.state){case b.c.TRANSACTION_PROCEEDING:e.transport.send(e.last_response);break;case b.c.TRANSACTION_ACCEPTED:}return!0}break;case b.c.ACK:e=c.transactions.ist[d.via_branch];if(!e)return!1;if(e.state===b.c.TRANSACTION_ACCEPTED)return!1;if(e.state===b.c.TRANSACTION_COMPLETED)return e.state=b.c.TRANSACTION_CONFIRMED,e.I=a.setTimeout(function(){e.timer_I()},b.Timers.TIMER_I),!0;break;case b.c.CANCEL:return e=c.transactions.ist[d.via_branch],e?e.state===b.c.TRANSACTION_PROCEEDING?(e.request.reply(487,b.c.REASON_487),!1):!0:(d.reply_sl(481,b.c.REASON_481),!0);default:e=c.transactions.nist[d.via_branch];if(e){switch(e.state){case b.c.TRANSACTION_TRYING:break;case b.c.TRANSACTION_PROCEEDING:case b.c.TRANSACTION_COMPLETED:e.transport.send(e.last_response)}return!0}}},b.Dialog=function(a,c,d,e){var f;if(c.countHeader("contact")===0)return console.log(b.c.LOG_DIALOG+"No contact header field. Silently discarded"),!1;if(c instanceof b.IncomingResponse)e=c.status_code<200?b.c.DIALOG_EARLY:b.c.DIALOG_CONFIRMED;else if(c instanceof b.IncomingRequest)e=e||b.c.DIALOG_CONFIRMED;else return console.log(b.c.LOG_DIALOG+"Received message is not a request neither a response"),!1;f=c.s("contact"),d==="UAS"?(this.id={call_id:c.call_id,local_tag:c.to_tag,remote_tag:c.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=e,this.remote_seqnum=c.cseq,this.local_uri=c.parseHeader("to").uri,this.remote_uri=c.parseHeader("from").uri,this.remote_target=f.uri,this.route_set=c.getHeaderAll("record-route")):d==="UAC"&&(this.id={call_id:c.call_id,local_tag:c.from_tag,remote_tag:c.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=e,this.local_seqnum=c.cseq,this.local_uri=c.parseHeader("from").uri,this.remote_uri=c.parseHeader("to").uri,this.remote_target=f.uri,this.route_set=c.getHeaderAll("record-route").reverse()),this.session=a,a.ua.dialogs[this.id.toString()]=this,console.log(b.c.LOG_DIALOG+"New "+d+" dialog created: "+this.state)},b.Dialog.prototype={update:function(a,c){this.state=b.c.DIALOG_CONFIRMED,console.log(b.c.LOG_DIALOG+"dialog state changed to 'CONFIRMED' state"),c==="UAC"&&(this.route_set=a.getHeaderAll("record-route").reverse())},terminate:function(){console.log(b.c.LOG_DIALOG+"dialog state: "+this.id.toString()+" deleted"),delete this.session.ua.dialogs[this.id.toString()]},createRequest:function(a,c){var d,e;return c=c||{},this.local_seqnum||(this.local_seqnum=Math.floor(Math.random()*1e4)),d=a===b.c.CANCEL||a===b.c.ACK?this.local_seqnum:this.local_seqnum+=1,c.route=this.route_set,e=new b.OutgoingRequest(a,this.remote_target,this.session.ua,{cseq:d,call_id:this.id.call_id,from_uri:this.local_uri,from_tag:this.id.local_tag,to_uri:this.remote_uri,to_tag:this.id.remote_tag},c),e.dialog=this,e},checkInDialogRequest:function(a){if(!this.remote_seqnum)this.remote_seqnum=a.cseq;else{if(a.method!==b.c.INVITE&&a.cseq<this.remote_seqnum)return a.method!==b.c.ACK&&a.reply(500,b.c.REASON_500),!1;a.cseq>this.remote_seqnum&&(this.remote_seqnum=a.cseq)}switch(a.method){case b.c.INVITE:if(a.cseq<this.remote_seqnum){if(this.state===b.c.DIALOG_EARLY){var c=(Math.random()*10|0)+1;a.reply(500,b.c.REASON_500,{"Retry-After":c})}else a.reply(500,b.c.REASON_500);return!1}if(this.state===b.c.DIALOG_EARLY)return a.reply(491,b.c.REASON_491),!1;a.hasHeader("contact")&&(this.remote_target=a.parseHeader("contact").uri);break;case b.c.NOTIFY:a.hasHeader("contact")&&(this.remote_target=a.parseHeader("contact").uri)}return!0},receiveRequest:function(a){if(!this.checkInDialogRequest(a))return;this.session.receiveRequest(a)}},b.RequestSender=function(a,c){this.ua=c,this.applicant=a,this.method=a.request.method,this.request=a.request,this.challenged=!1,c.status===b.c.UA_STATUS_USER_CLOSED&&(this.method!==b.c.BYE||this.method!==b.c.ACK)&&this.onTransportError()},b.RequestSender.prototype={send:function(){switch(this.method){case"INVITE":this.clientTransaction=new b.Transactions.InviteClientTransaction(this,this.request,this.ua.transport);break;case"ACK":this.clientTransaction=new b.Transactions.AckClientTransaction(this,this.request,this.ua.transport);break;default:this.clientTransaction=new b.Transactions.NonInviteClientTransaction(this,this.request,this.ua.transport)}this.clientTransaction.send()},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(a){var c,d,e=a.status_code;e!=="401"&&e!=="407"||!!this.challenged?this.applicant.receiveResponse(a):(c=b.DigestAuthentication(this.ua,this.request,a),e==="401"?this.request.setHeader("authorization",c):this.request.setHeader("proxy-authorization",c),a.method===b.c.REGISTER?d=this.applicant.cseq+=1:this.request.dialog?d=this.request.dialog.local_seqnum+=1:(d=this.request.headers.CSeq.toString().split(" ")[0],d=parseInt(d,10)+1),this.request.setHeader("cseq",d+" "+this.method),this.challenged=!0,this.send())}},b.Registrator=function(a,b){var c=1;this.ua=a,this.transport=b,this.expires=a.configuration.register_expires,this.min_expires=a.configuration.register_min_expires,this.call_id=Math.random().toString(36).substr(2,22),this.cseq=80,this.registrar="sip:"+a.configuration.domain,this.from_uri=a.configuration.from_uri,this.registrationTimer=null,this.registered=this.registered_before=this.closed=!1,this.ua.registrator=this,c?(this.contact="<"+this.ua.contact.uri+">",this.contact+=";reg-id="+c,this.contact+=';+sip.instance="<urn:uuid:'+this.ua.configuration.instance_id+'>"'):this.contact="<"+this.ua.contact.uri+">",this.register()},b.Registrator.prototype={register:function(){var c,d=this;this.request=new b.OutgoingRequest(b.c.REGISTER,this.registrar,this.ua,{to_uri:this.from_uri,call_id:this.call_id,cseq:this.cseq+=1},{contact:this.contact+";expires="+this.expires,allow:b.c.ALLOWED_METHODS}),c=new b.RequestSender(this,this.ua),this.receiveResponse=function(c){var e,f,g,h=c.countHeader("contact");if(this.closed)return;if(c.cseq!==this.cseq)return;switch(!0){case/^1[0-9]{2}$/.test(c.status_code):break;case/^2[0-9]{2}$/.test(c.status_code):c.hasHeader("expires")&&(f=c.getHeader("expires"));if(!h){console.log(b.c.LOG_REGISTRATOR+"No Contact header possitive response to Register. Ignore response");break}while(h--){e=c.parseHeader("contact",h);if(e.uri===this.ua.contact.uri){f=e.params.expires;break}}if(!e){console.log(b.c.LOG_REGISTRATOR+"No Contact header pointing to us. Ignore response");break}f?f<this.min_expires&&(console.log(b.c.LOG_REGISTRATOR+"Received expires value: "+f+" is smaller than the nimum expires time: "+this.min_expires),f=this.min_expires):f=this.expires,this.registrationTimer=a.setTimeout(function(){d.register()},f*1e3-3e3),e.params["temp-gruu"]&&(this.ua.contact.temp_gruu=e.params["temp-gruu"].replace(/"/g,"")),e.params["pub-gruu"]&&(this.ua.contact.pub_gruu=e.params["pub-gruu"].replace(/"/g,"")),this.registered=!0,this.ua.emit("register");break;case/^423$/.test(c.status_code):c.hasHeader("min-expires")?(g=c.getHeader("min-expires"),f=g-this.expires,this.registrationTimer=a.setTimeout(function(){d.register()},this.expires*1e3)):(console.log(b.c.LOG_REGISTRATOR+"423 response code received to a REGISTER without min-expires. Deregister"),this.registrationFailure());break;default:this.registrationFailure()}},this.onRequestTimeout=function(){this.registrationFailure()},this.onTransportError=function(){this.registrationFailure()},c.send()},deregister:function(c){if(!this.registered){console.log(b.c.LOG_REGISTRATOR+"Already deregistered");return}this.closed=!0,this.registered=!1,this.ua.emit("deregister"),a.clearTimeout(this.registrationTimer),c?this.request=new b.OutgoingRequest(b.c.REGISTER,this.registrar,this.ua,{to_uri:this.from_uri,call_id:this.call_id,cseq:this.cseq+=1},{contact:"*",expires:0}):this.request=new b.OutgoingRequest(b.c.REGISTER,this.registrar,this.ua,{to_uri:this.from_uri,call_id:this.call_id,cseq:this.cseq+=1},{contact:this.contact+";expires=0"});var d=new b.RequestSender(this,this.ua);this.receiveResponse=function(a){console.log(b.c.LOG_REGISTRATOR+a.status_code+" "+a.reason_phrase+" received to deregister request")},this.onRequestTimeout=function(){console.log(b.c.LOG_REGISTRATOR+"Request Timeout received for deregister request")},this.onTransportError=function(){console.log(b.c.LOG_REGISTRATOR+"Transport Error received for deregister request")},d.send()},registrationFailure:function(a){this.registered&&(this.registered=!1,this.ua.emit("deregister")),this.ua.emit("registrationFailure")},onTransportClosed:function(){if(this.closed)return;this.registered_before=this.registered,a.clearTimeout(this.registrationTimer),this.registered&&(this.registered=!1,this.ua.emit("deregister"))},onTransportConnected:function(){this.closed?this.closed=!1:this.register()},close:function(){this.registered_before=this.registered,this.closed=!0,this.deregister()}},b.Session=function(){var c=function(){this.status=null,this.dialog=null,this.earlyDialogs=[],this.mediaSession=null,this.ackTimer=null,this.expiresTimer=null,this.invite2xxTimer=null,this.userNoAnswerTimer=null,this.closeTimer=null,this.events=["ring","cancel","answer","terminate","failure","error"]};c.prototype=new b.EventEmitter,c.prototype.close=function(c,d){if(this.status!==b.c.SESSION_TERMINATED){var e=this;console.log(b.c.LOG_INVITE_SESSION+"Closing Invite Session "+this.id),this.mediaSession&&this.mediaSession.close(),a.clearTimeout(this.ackTimer),a.clearTimeout(this.expiresTimer),a.clearTimeout(this.invite2xxTimer),a.clearTimeout(this.userNoAnswerTimer),this.terminateEarlyDialogs(),this.terminateConfirmedDialog(),this.status=b.c.SESSION_TERMINATED,this.closeTimer=a.setTimeout(function(){e&&e.ua.sessions[e.id]&&delete e.ua.sessions[e.id]},"5000"),c&&this.emit(c,d)}},c.prototype.createEarlyDialog=function(a,c){var d,e=c==="UAS"?a.to_tag:a.from_tag,f=c==="UAS"?a.from_tag:a.to_tag,g=a.call_id+e+f;return this.earlyDialogs[g]?!0:(d=new b.Dialog(this,a,c,b.c.DIALOG_EARLY),d?(this.earlyDialogs[g]=d,!0):!1)},c.prototype.createConfirmedDialog=function(a,c){var d,e=c==="UAS"?a.to_tag:a.from_tag,f=c==="UAS"?a.from_tag:a.to_tag,g=a.call_id+e+f;return d=this.earlyDialogs[g],d?(d.update(a,c),this.dialog=d,delete this.earlyDialogs[g],!0):(d=new b.Dialog(this,a,c),d?(this.to_tag=a.to_tag,this.dialog=d,!0):!1)},c.prototype.terminateConfirmedDialog=function(){this.dialog&&(this.dialog.terminate(),delete this.dialog)},c.prototype.terminateEarlyDialogs=function(){var a;for(a in this.earlyDialogs)this.earlyDialogs[a].terminate(),delete this.earlyDialogs[a]},c.prototype.receiveRequest=function(c){var d,e=this;if(c.method===b.c.CANCEL)c.reply(200,b.c.REASON_200),this.status===b.c.SESSION_WAITING_FOR_ANSWER&&(d=c.getHeader("Reason"),this.status=b.c.SESSION_CANCELED,this.close("cancel",[d?d:undefined]));else switch(c.method){case b.c.ACK:this.status===b.c.SESSION_WAITING_FOR_ACK&&(a.clearTimeout(this.ackTimer),a.clearTimeout(this.invite2xxTimer),this.status=b.c.SESSION_CONFIRMED);break;case b.c.BYE:c.reply(200,b.c.REASON_200),this.close("terminate",[b.c.SESSION_TERMINATE_PEER_TERMINATED]);break;case b.c.INVITE:this.status===b.c.SESSION_CONFIRMED&&console.log(b.c.LOG_INVITE_SESSION+"Re-INVITE received");break;case b.c.MESSAGE:b.messageReceiver(this.ua,c)}},c.prototype.ackTimeout=function(){this.status===b.c.SESSION_WAITING_FOR_ACK&&(console.log(b.c.LOG_INVITE_SESSION+"No ACK received. Call will be terminated"),a.clearTimeout(this.invite2xxTimer),this.sendBye(),this.close("terminate",[b.c.SESSION_TERMINATE_NO_ACK_RECEIVED]))},c.prototype.expiresTimeout=function(a){this.status===b.c.SESSION_WAITING_FOR_ANSWER&&(a.reply(487,b.c.REASON_487),this.close("terminate",[b.c.SESSION_TERMINATE_EXPIRES_TIMEOUT]))},c.prototype.invite2xxRetransmission=function(c,d,e){var f,g=this;f=b.Timers.T1*Math.pow(2,c),c*b.Timers.T1<=b.Timers.T2?(c+=1,d.reply(200,b.c.REASON_200,{Contact:"<"+this.contact+">"},e),this.invite2xxTimer=a.setTimeout(function(){g.invite2xxRetransmission(c,d,e)},f)):a.clearTimeout(this.invite2xxTimer)},c.prototype.userNoAnswerTimeout=function(a){a.reply(408,b.c.REASON_408),this.close("terminate",[b.c.SESSION_TERMINATE_USER_NO_ANSWER_TIMEOUT])},c.prototype.acceptAndTerminate=function(a,b){if(!this.createConfirmedDialog(a,"UAC"))return;this.sendACK(),this.sendBye(b)},c.prototype.sendACK=function(){function e(a){this.request=a,this.send=function(){var a=new b.RequestSender(this,d.ua);a.send()}}var a,c,d=this;a=this.dialog.createRequest(b.c.ACK),c=new e(a),c.send()},c.prototype.sendBye=function(a){function f(a){this.request=a,this.send=function(){var a=new b.RequestSender(this,e.ua);a.receiveResponse=function(a){},a.send()}}var c,d,e=this;a=a?{reason:a}:{},c=this.dialog.createRequest(b.c.BYE,a),d=new f(c),d.send()},c.prototype.onTransportError=function(){this.status!==b.c.TERMINATED&&this.close("error",[b.c.TRANSPORT_ERROR])},c.prototype.onRequestTimeout=function(){this.status!==b.c.TERMINATED&&this.close("error",[b.c.REQUEST_TIMEOUT])},c.prototype.terminate=function(){switch(this.status){case b.c.SESSION_NULL:case b.c.SESSION_INVITE_SENT:case b.c.SESSION_1XX_RECEIVED:this.cancel();break;case b.c.SESSION_WAITING_FOR_ANSWER:this.reject();break;case b.c.SESSION_WAITING_FOR_ACK:case b.c.SESSION_CONFIRMED:this.sendBye()}this.close()},c.prototype.message=function(a,c,e,f){function i(a){switch(!0){case/^2[0-9]{2}$/.test(a.status_code):console.log(b.c.LOG_INVITE_SESSION+"Positive response received to in-dialog Message."),e&&e();break;case/^[3456][0-9]{2}$/.test(a.status_code):console.log(b.c.LOG_INVITE_SESSION+"Negative response received to in-dialog Message."),f&&f()}}var g,h;e=b.utils.isFunction(e)?e:null,f=b.utils.isFunction(f)?f:null,c=c||"text/plain",g=this.dialog.createRequest(b.c.MESSAGE,{content_type:c}),g.body=a,h=new d(this,g,i,f),h.send()};var d=function(a,b,c,d){this.session=a,this.request=b,this.onReceiveResponse=c,this.onFailure=d,this.reatempt=!1,this.reatemptTimer=null};return d.prototype={send:function(){var c=new b.RequestSender(this,this.session.ua);this.receiveResponse=function(d){var e=d.status_code;e==="408"||e==="480"?(this.session.close("terminate",[b.c.SESSION_TERMINATE_IN_DIALOG_408_480]),this.session.onFailure(d),this.onReceiveResponse(d)):e==="491"&&d.method===b.c.INVITE?!this.reatempt&&this.session.status!==b.c.TERMINATED&&(this.request.cseq.value=this.request.dialog.local_seqnum+=1,this.reatemptTimer=a.setTimeout(function(){c.send()},this.getReatempTimeout())):this.onReceiveResponse(d)},this.onRequestTimeout=function(){this.session.onRequestTimeout(),this.onFailure&&this.onFailure(b.c.REQUEST_TIMEOUT)},this.onTransportError=function(){this.session.onTransportError(),this.onFailure&&this.onFailure(b.c.TRANSPORT_ERROR)},c.send()},getReatempTimeout:function(){var a;return this instanceof b.OutgoingSession?a=(Math.random()*1.9+2.1).toFixed(2):a=(Math.random()*2).toFixed(2),a}},c}(),b.OutgoingSession=function(){var a=function(a,d,e,f,g){var h;this.ua=a,this.from_tag=b.utils.newTag(),this.status=b.c.SESSION_NULL,this.mediaSession=new b.MediaSession(this,e,f),this.isCanceled=!1,this.received_100=!1,this.initEvents(this.events),a.contact.pub_gruu?this.contact=a.contact.pub_gruu:this.contact=a.contact.uri,h=new b.OutgoingRequest(b.c.INVITE,d,a,{from_tag:this.from_tag},{contact:"<"+this.contact+";ob>",allow:b.c.ALLOWED_METHODS,"content-type":"application/sdp"}),this.id=h.headers["Call-ID"]+this.from_tag,this.ua.sessions[this.id]=this,this.send=function(){new c(this,a,h,g)},this.cancel=function(){this.status===b.c.SESSION_INVITE_SENT?this.received_100?h.cancel():this.isCanceled=!0:this.status===b.c.SESSION_1XX_RECEIVED&&h.cancel(),this.close("terminate",[b.c.SESSION_TERMINATE_USER_CANCELED])}};a.prototype=new b.Session,a.prototype.receiveInitialRequestResponse=function(a,c){var d=this;if(this.status===b.c.SESSION_INVITE_SENT||this.status===b.c.SESSION_1XX_RECEIVED)switch(a){case 100:this.received_100=!0;break;case"1xx":case"1xx_answer":if(!this.createEarlyDialog(c,"UAC"))break;this.status=b.c.SESSION_1XX_RECEIVED,this.emit("ring");break;case"2xx":if(this.dialog){c.to_tag===this.to_tag?console.log(b.c.LOG_CLIENT_INVITE_SESSION+"2xx retransmission received"):console.log(b.c.LOG_CLIENT_INVITE_SESSION+"2xx received from an endpoint not stablishing the dialog");return}this.acceptAndTerminate(c,'SIP ;cause= 400 ;text= "Missing session description"'),this.close("terminate",[b.c.SESSION_TERMINATE_BAD_MEDIA_DESCRIPTION]);break;case"2xx_answer":if(this.dialog){c.to_tag===this.to_tag?console.log(b.c.LOG_CLIENT_INVITE_SESSION+"2xx_answer retransmission received"):console.log(b.c.LOG_CLIENT_INVITE_SESSION+"2xx_answer received from an endpoint not stablishing the dialog");return}this.mediaSession.onMessage(this.mediaSession.peerConnection.SDP_ANSWER,c.body,function(){if(!d.createConfirmedDialog(c,"UAC"))return;d.sendACK(),d.status=b.c.SESSION_CONFIRMED,d.emit("answer")},function(a){console.warn(a),d.acceptAndTerminate(c,'SIP ;cause= 488 ;text= "Not Acceptable Here"'),d.close("terminate",[b.c.SESSION_TERMINATE_BAD_MEDIA_DESCRIPTION])});break;case"failure":this.close("failure",[c.status_code,c.reason_phrase])}};var c=function(a,c,d,e){function h(){var e=new b.RequestSender(f,c);f.receiveResponse=function(b){switch(!0){case/^100$/.test(b.status_code):a.received_100=!0;break;case/^1[0-9]{2}$/.test(b.status_code):if(!b.to_tag)break;b.body?g="1xx_answer":g="1xx";break;case/^2[0-9]{2}$/.test(b.status_code):b.body?g="2xx_answer":g="2xx";break;default:g="failure"}a.isCanceled?b.status_code>=100&&b.status_code<200?f.request.cancel():b.status_code>=200&&b.status_code<299&&(a.sendACK(d),a.sendBye(),f.request.send()):a.receiveInitialRequestResponse(g,b)},f.onRequestTimeout=function(){a.onRequestTimeout()},f.onTransportError=function(){a.onTransportError()},e.send()}function i(){if(a.status===b.c.SESSION_TERMINATED){a.mediaSession.close();return}d.body=a.mediaSession.peerConnection.localDescription.toSdp(),a.status=b.c.SESSION_INVITE_SENT,h()}function j(c,d){c==="addStream"?(console.log(b.c.LOG_CLIENT_INVITE_SESSION+"PeerConnection Creation Failed: "+d),a.close("terminate",[b.c.SESSION_TERMINATE_BAD_MEDIA_DESCRIPTION])):c==="getUserMedia"&&(console.log(b.c.LOG_CLIENT_INVITE_SESSION+"Media Access denied"),a.close("terminate",[b.c.SESSION_TERMINATE_USER_DENIED_MEDIA_ACCESS]))}var f=this,g=null;this.request=d,a.mediaSession.startCaller(e,i,j)};return a}(),b.IncomingSession=function(a,c){this.ua=a,this.from_tag=c.from_tag,this.status=b.c.SESSION_INVITE_RECEIVED,this.id=c.call_id+this.from_tag,this.initEvents(this.events),a.contact.pub_gruu?this.contact=a.contact.pub_gruu:this.contact=a.contact.uri,this.ua.sessions[this.id]=this,this.receiveInitialRequest(a,c)},b.IncomingSession.prototype=new b.Session,b.IncomingSession.prototype.receiveInitialRequest=function(c,d){var e,f,g,h=this;d.hasHeader("expires")&&(g=d.getHeader("expires")*1e3,this.expiresTimer=a.setTimeout(function(){h.expiresTimeout(d)},g)),e=d.body,f=d.getHeader("Content-Type");if(e&&f==="application/sdp"){d.to_tag=b.utils.newTag();if(!this.createEarlyDialog(d,"UAS"))return;d.reply(180,b.c.REASON_180,{Contact:"<"+this.contact+">"}),this.status=b.c.SESSION_WAITING_FOR_ANSWER,this.userNoAnswerTimer=a.setTimeout(function(){h.userNoAnswerTimeout(d)},c.configuration.no_answer_timeout),this.answer=function(c,e){var f,g,i,j;h.status===b.c.SESSION_WAITING_FOR_ANSWER?(f=d.body,g=function(){var c=h.mediaSession.peerConnection.localDescription.toSdp();if(!h.createConfirmedDialog(d,"UAS"))return;d.reply(200,b.c.REASON_200,{Contact:"<"+h.contact+">"},c,function(){h.status=b.c.SESSION_WAITING_FOR_ACK,h.invite2xxTimer=a.setTimeout(function(){h.invite2xxRetransmission(1,d,c)},b.Timers.T1),a.clearTimeout(h.userNoAnswerTimer),h.ackTimer=a.setTimeout(function(){h.ackTimeout()},b.Timers.TIMER_H)},function(){h.close("terminate",[b.c.SESSION_TERMINATE_TRANSPORT_ERROR])})},i=function(a){d.reply(486,b.c.REASON_486),h.close("terminate",[b.c.SESSION_TERMINATE_USER_DENIED_MEDIA_ACCESS])},j=function(a){console.log(b.c.LOG_SERVER_INVITE_SESSION+"PeerConnection Creation Failed: --"+a+"--"),d.reply(488,b.c.REASON_488),h.close("terminate",[b.c.SESSION_TERMINATE_BAD_MEDIA_DESCRIPTION])},h.mediaSession=new b.MediaSession(h,c,e),h.mediaSession.startCallee(g,i,j,f)):console.warn(b.c.LOG_SERVER_INVITE_SESSION+"No call waiting for answer")},this.reject=function(){this.status===b.c.SESSION_WAITING_FOR_ANSWER&&d.reply(486,b.c.REASON_486)},c.emit("call",[d.parseHeader("from").user,d.parseHeader("from").uri,this])}else d.reply(415,b.c.REASON_415)},b.MediaSession=function(a,b,c){this.session=a,this.selfView=b||null,this.remoteView=c||null,this.localMedia=null,this.peerConnection=null},b.MediaSession.prototype={startCaller:function(a,b,c){function e(a){var e;d.start(b,c);try{d.peerConnection.addStream(a)}catch(f){c("addSstream",f)}e=d.peerConnection.createOffer(),d.peerConnection.setLocalDescription(d.peerConnection.SDP_OFFER,e),d.peerConnection.startIce()}function f(){c("getUserMedia")}var d=this;this.getUserMedia(a,e,f)},startCallee:function(a,b,c,d){function h(a){g.peerConnection.addStream(a);var b=g.peerConnection.createAnswer(d,f);g.peerConnection.setLocalDescription(g.peerConnection.SDP_ANSWER,b),g.peerConnection.startIce()}function i(){b()}var e,f,g=this;this.start(a),this.peerConnection.onaddstream=function(a){var b,c;b=a.stream.audioTracks.length>0?!0:!1,c=a.stream.videoTracks.length>0?!0:!1,f={audio:b,video:c},g.remoteView.src=webkitURL.createObjectURL(a.stream),g.getUserMedia(f,h,i)},e=new SessionDescription(d);try{this.peerConnection.setRemoteDescription(this.peerConnection.SDP_OFFER,e)}catch(j){c(j)}},start:function(a){var c=this,d=!1;this.peerConnection=new webkitPeerConnection00("STUN "+this.session.ua.configuration.stun_server,function(c,e){c&&console.log(b.c.LOG_MEDIA_SESSION+"ICE candidate received: "+c.toSdp()),e||(console.info(b.c.LOG_MEDIA_SESSION+"No more ICE candidate"),console.log(b.c.LOG_MEDIA_SESSION+"Peerconnection status: "+this.readyState),console.log(b.c.LOG_MEDIA_SESSION+"Ice Status: "+this.iceState),d||(d=!0,a()))}),this.peerConnection.onopen=function(){console.log(b.c.LOG_MEDIA_SESSION+"Media session oppened")},this.peerConnection.onaddstream=function(a){console.warn("stream added");switch(this.readyState){case this.OPENING:c.remoteView&&this.remoteStreams.length>0&&(c.remoteView.src=webkitURL.createObjectURL(a.stream));break;case this.ACTIVE:c.remoteView&&this.remoteStreams.length>0&&(c.remoteView.src=webkitURL.createObjectURL(a.stream))}},this.peerConnection.onremovestream=function(a){console.log(b.c.LOG_MEDIA_SESSION+"Stream rmeoved: "+a)},this.peerConnection.onstatechange=function(){console.warn("Status changed to: "+this.readyState),console.warn("ICE state is: "+this.iceState)}},close:function(){console.log(b.c.LOG_MEDIA_SESSION+"Closing peerConnection"),this.peerConnection&&(this.peerConnection.close(),this.localMedia&&this.localMedia.stop())},getUserMedia:function(a,c,d){function f(a){console.log(b.c.LOG_MEDIA_SESSION+"Got stream "+a),e.localMedia=a,e.selfView&&(e.selfView.src=webkitURL.createObjectURL(a)),c(a)}function g(){d()}var e=this;console.log(b.c.LOG_MEDIA_SESSION+"Requesting access to local media."),navigator.webkitGetUserMedia(a,f,g)},onMessage:function(a,c,d,e){if(a===this.peerConnection.SDP_OFFER)console.log(b.c.LOG_MEDIA_SESSION+"re-Invite received");else if(a===this.peerConnection.SDP_ANSWER){var f=new SessionDescription(c);try{this.peerConnection.setRemoteDescription(this.peerConnection.SDP_ANSWER,f),d()}catch(g){e(g)}}}},b.MessageSender=function(a,c,d,e){var f=["success","failure","error"];this.ua=a,this.target=c,this.closed=!1,this.ua.applicants[this]=this,this.request=new b.OutgoingRequest(b.c.MESSAGE,c,a,null,{content_type:e||"text/plain"}),d&&(this.request.body=d),this.initEvents(f)},b.MessageSender.prototype=new b.EventEmitter,b.MessageSender.prototype.send=function(){var a=new b.RequestSender(this,this.ua);a.send()},b.MessageSender.prototype.receiveResponse=function(a){if(this.closed)return;switch(!0){case/^1[0-9]{2}$/.test(a.status_code):break;case/^2[0-9]{2}$/.test(a.status_code):delete this.ua.applicants[this],this.emit("success",[a]);break;default:delete this.ua.applicants[this],this.emit("failure",[a])}},b.MessageSender.prototype.onRequestTimeout=function(){if(this.closed)return;this.emit("error",[b.c.REQUEST_TIMEOUT])},b.MessageSender.prototype.onTransportError=function(){if(this.closed)return;this.emit("error",[b.c.TRANSPORT_ERROR])},b.MessageSender.prototype.close=function(){this.closed=!0,delete this.ua.applicants[this]},b.messageReceiver=function(a,c){var d=c.getHeader("content-type");c.reply(200,b.c.REASON_200),d&&d==="text/plain"&&a.emit("message",[c.s("from").user,c.s("from").uri,c.body])},b.Subscriber=function(){},b.Subscriber.prototype={initSubscriber:function(){this.N=null,this.subscriptions={}},timer_N:function(){this.close()},close:function(){var c;if(this.state!=="terminated"){console.log(b.c.LOG_SUBSCRIBER,"Terminating Subscriber"),this.state="terminated",a.clearTimeout(this.N);for(c in this.subscriptions)this.subscriptions[c].unsubscribe();delete this.ua.sessions[this.id],this.onTerminate()}},onSubscriptionTerminate:function(a){delete this.subscriptions[a.id],Object.keys(this.subscriptions).length===0&&this.close()},subscribe:function(){var c,d,e;if(["notify_wait","pending","active","terminated"].indexOf(this.state)!==-1){console.log(b.c.LOG_SUBSCRIBER,"Subscription is already on");return}c=this,d=b.utils.newTag(),new function(){this.request=c.createSubscribeRequest(null,{from_tag:d});var f=new b.RequestSender(this,c.ua);this.receiveResponse=function(d){switch(!0){case/^1[0-9]{2}$/.test(d.status_code):break;case/^2[0-9]{2}$/.test(d.status_code):e=d.s("Expires"),e&&e<=c.expires?(a.clearTimeout(c.N),c.N=a.setTimeout(function(){c.timer_N()},e*1e3),c.route_set_2xx=d.getHeaderAll("record-route").reverse(),c.to_tag_2xx=d.s("to").tag,c.initial_local_seqnum=parseInt(d.s("cseq").value,10)):(c.close(),e?(console.log(b.c.LOG_SUBSCRIBER,"Expires header in a 200-class response to SUBSCRIBE with a higher value than the indicated in the request"),c.onFailure(null,b.c.INVALID_EXPIRES_HEADER)):(console.log(b.c.LOG_SUBSCRIBER,"Expires header missing in a 200-class response to SUBSCRIBE"),c.onFailure(null,b.c.EXPIRES_HEADER_MISSING)));break;default:c.close(),c.onFailure(d,null)}},this.onRequestTimeout=function(){c.onFailure(null,b.c.REQUEST_TIMEOUT)},this.onTransportError=function(){c.onFailure(null,b.c.TRANSPORT_ERROR)},this.send=function(){c.id=this.request.headers["Call-ID"]+d,c.ua.sessions[c.id]=c,c.state="notify_wait",c.N=a.setTimeout(function(){c.timer_N()},b.Timers.T1*64),f.send()},this.send()}},unsubscribe:function(){this.close()},terminate:function(){this.unsubscribe()},refresh:function(){var a;for(a in this.subscriptions)this.subscriptions[a].subscribe()},receiveRequest:function(c){var d,e;if(!this.matchEvent(c))return;d=c.s("Subscription-State"),e=d.expires||this.expires;switch(d.state){case"pending":case"active":a.clearTimeout(this.N),new b.Subscription(this,c,d.state,e);break;case"terminated":d.reason&&console.log(b.c.LOG_SUBSCRIBER,"Terminating subscription with reason: "+d.reason),a.clearTimeout(this.N),this.close()}},matchEvent:function(a){var c;return a.hasHeader("Event")?a.hasHeader("Subscription-State")?(c=a.s("event").event,this.event!==c?(console.log(b.c.LOG_SUBSCRIBER,"Event match failed"),a.reply(481,"Event match failed"),!1):!0):(console.log(b.c.LOG_SUBSCRIBER,'Missing "Subscription-State" header'),!1):(console.log(b.c.LOG_SUBSCRIBER,'Missing "Event" header'),!1)}},b.Subscription=function(a,b,c,d){this.id=null,this.subscriber=a,this.ua=a.ua,this.state=c,this.expires=d,this.dialog=null,this.N=null,this.error_codes=[404,405,410,416,480,481,482,483,484,485,489,501,604],this.createConfirmedDialog(b,"UAS")&&(this.id=this.dialog.id.toString(),this.subscriber.subscriptions[this.id]=this,b.from_tag===this.subscriber.to_tag_2xx&&(this.dialog.route_set=this.subscriber.route_set_2xx),this.dialog.local_seqnum=this.subscriber.initial_local_seqnum,this.receiveRequest(b,!0))},b.Subscription.prototype={timer_N:function(){this.state==="terminated"?this.close():this.state==="pending"?(this.state="terminated",this.close()):this.subscribe()},close:function(){this.state="terminated",this.terminateDialog(),a.clearTimeout(this.N),this.subscriber.onSubscriptionTerminate(this)},createConfirmedDialog:function(a,c){var d,e,f,g;return d=c==="UAS"?a.to_tag:a.from_tag,e=c==="UAS"?a.from_tag:a.to_tag,f=a.call_id+d+e,g=new b.Dialog(this,a,c),g?(this.dialog=g,!0):!1},terminateDialog:function(){this.dialog&&(this.dialog.terminate(),delete this.dialog)},receiveRequest:function(c,d){var e,f=this;if(!d&&!this.subscriber.matchEvent(c)){console.log(b.c.LOG_SUBSCRIBER,"Notify request does not match event");return}c.reply(200,b.c.REASON_200,{Contact:this.subscriber.contact}),e=c.s("Subscription-State");switch(e.state){case"active":this.state="active",this.subscriber.receiveInfo(c);case"pending":this.expires=e.expires||this.expires,a.clearTimeout(f.N),f.N=a.setTimeout(function(){f.timer_N()},this.expires*1e3);break;case"terminated":e.reason&&console.log(b.c.LOG_SUBSCRIBER,"Terminating subscription with reason: "+e.reason),this.close(),this.subscriber.receiveInfo(c)}},subscribe:function(){var c,d=this;new function(){this.request=d.subscriber.createSubscribeRequest(d.dialog);var e=new b.RequestSender(this,d.subscriber.ua);this.receiveResponse=function(e){if(d.error_codes.indexOf(e.status_code)!==-1)d.close(),d.subscriber.onFailure(e,null);else switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):c=e.s("Expires"),c&&c<=d.expires?(a.clearTimeout(d.N),d.N=a.setTimeout(function(){d.timer_N()},c*1e3)):(d.close(),c?(console.log(b.c.LOG_SUBSCRIBER,"Expires header in a 200-class response to SUBSCRIBE with a higher value than the indicated in the request"),d.subscriber.onFailure(null,b.c.INVALID_EXPIRES_HEADER)):(console.log(b.c.LOG_SUBSCRIBER,"Expires header missing in a 200-class response to SUBSCRIBE"),d.subscriber.onFailure(null,b.c.EXPIRES_HEADER_MISSING)));break;default:d.close(),d.subscriber.onFailure(e,null)}},this.send=function(){a.clearTimeout(d.N),d.N=a.setTimeout(function(){d.timer_N()},b.Timers.T1*64),e.send()},this.onRequestTimeout=function(){d.subscriber.onFailure(null,b.c.REQUEST_TIMEOUT)},this.onTransportError=function(){d.subscriber.onFailure(null,b.c.TRANSPORT_ERROR)},this.send()}},unsubscribe:function(){var c=this;this.state="terminated",new function(){this.request=c.subscriber.createSubscribeRequest(c.dialog),this.request.setHeader("Expires",0);var d=new b.RequestSender(this,c.subscriber.ua);this.receiveResponse=function(){},this.send=function(){a.clearTimeout(c.N),c.N=a.setTimeout(function(){c.timer_N()},b.Timers.T1*64),d.send()},this.onRequestTimeout=function(){c.subscriber.onFailure(null,b.c.REQUEST_TIMEOUT)},this.onTransportError=function(){c.subscriber.onFailure(null,b.c.TRANSPORT_ERROR)},this.send()}}},b.UA=function(a){var c=["connect","disconnect","register","deregister","registrationFailure","call","message"];this.configuration={},this.dialogs={},this.registrator=null,this.applicants={},this.sessions={},this.transport=null,this.contact={},this.status=b.c.UA_STATUS_INIT,this.error=null,this.transactions={nist:{},nict:{},ist:{},ict:{}};if(!a||!this.loadConfig(a))throw this.status=b.c.UA_STATUS_NOT_READY,this.error=b.c.UA_CONFIGURATION_ERROR,new b.exceptions.ConfigurationError;this.initEvents(c)},b.UA.prototype=new b.EventEmitter,b.UA.prototype.networkIsReady=function(){console.log("Network Ready notification received"),this.status===b.c.UA_STATUS_NOT_READY&&this.error===b.c.UA_NETWORK_ERROR&&this.transport.connect()},b.UA.prototype.register=function(){if(this.status===b.c.UA_STATUS_READY)this.registrator.register();else throw new b.exceptions.NotReadyError},b.UA.prototype.deregister=function(a){if(this.status===b.c.UA_STATUS_READY)this.registrator.deregister(a);else throw new b.exceptions.NotReadyError},b.UA.prototype.isRegistered=function(){return this.registrator&&this.registrator.registered?!0:!1},b.UA.prototype.isConnected=function(){return this.transport?this.transport.connected:!1},b.UA.prototype.call=function(a,c,d,e){var f;if(this.status!==b.c.UA_STATUS_READY)throw new b.exceptions.NotReadyError;if(!b.utils.isWebRtcSupported())throw console.log(b.c.LOG_UA+"rtcweb not supported."),new b.exceptions.WebRtcNotSupportedError;a=b.utils.normalizeUri(a,this.configuration.domain);if(!a)throw new b.exceptions.InvalidTargetError;return f=new b.OutgoingSession(this,a,c,d,e),f},b.UA.prototype.message=function(a,c,d){var e;if(this.status!==b.c.UA_STATUS_READY)throw new b.exceptions.NotReadyError;a=b.utils.normalizeUri(a,this.configuration.domain);if(!a)throw new b.exceptions.InvalidTargetError;return e=new b.MessageSender(this,a,c,d),e},b.UA.prototype.stop=function(){var c,d,e=this;if(this.status!==b.c.UA_STATUS_READY)throw new b.exceptions.NotReadyError;console.log(b.c.LOG_UA+"User requested closure."),this.registrator&&(console.log(b.c.LOG_UA+"Closing registrator"),this.registrator.close());for(c in this.sessions)console.log(b.c.LOG_UA+"Closing session"+c),this.sessions[c].terminate();for(d in this.applicants)this.applicants[d].close();this.status=b.c.UA_STATUS_USER_CLOSED,this.shutdownGraceTimer=a.setTimeout(function(){e.transport.disconnect()},"5000")},b.UA.prototype.start=function(){var a;if(this.status===b.c.UA_STATUS_INIT)a=this.getNextWsServer(),new b.Transport(this,a);else if(this.status===b.c.UA_STATUS_USER_CLOSED)console.log(b.c.LOG_UA+"Resuming.."),this.status=b.c.UA_STATUS_READY,this.transport.connect();else if(this.status===b.c.UA_STATUS_READY)console.log(b.c.LOG_UA+"UA is in ready status. Not resuming");else throw new b.exceptions.NotReadyError},b.UA.prototype.onTransportClosed=function(a){var c,d,e=["nict","ict","nist","ist"];a.server.status=b.c.WS_SERVER_DISCONNECTED,console.log(b.c.LOG_UA+"connection status set to: "+b.c.WS_SERVER_DISCONNECTED);for(c in e)for(d in this.transactions[e[c]])this.transactions[e[c]][d].onTransportError();this.contact.pub_gruu||this.closeSessionsOnTransportError()},b.UA.prototype.onTransportError=function(a){var c;console.log(b.c.LOG_UA+"Transport "+a.server.ws_uri+" failed"),a.server.status=b.c.WS_SERVER_ERROR,console.log(b.c.LOG_UA+"connection status set to: "+b.c.WS_SERVER_ERROR),c=this.getNextWsServer(),c?new b.Transport(this,c):(this.closeSessionsOnTransportError(),this.status=b.c.UA_STATUS_NOT_READY,this.error=b.c.UA_NETWORK_ERROR,this.emit("disconnect"))},b.UA.prototype.onTransportConnected=function(a){this.transport=a,a.server.status=b.c.WS_SERVER_READY,console.log(b.c.LOG_UA+"connection status set to: "+b.c.WS_SERVER_READY);if(this.status===b.c.UA_STATUS_USER_CLOSED)return;this.configuration.auto_register&&(this.registrator?this.registrator.onTransportConnected():this.registrator=new b.Registrator(this,a)),this.status=b.c.UA_STATUS_READY,this.error=null,this.emit("connect")},b.UA.prototype.receiveRequest=function(a){var c,d,e=a.method;if(a.ruri.user!==this.configuration.user){console.log(b.c.LOG_UA+"Request URI does not point to us"),a.reply_sl(404,b.c.REASON_404);return}if(b.Transactions.checkTransaction(this,a))return;e===b.c.INVITE?new b.Transactions.InviteServerTransaction(a,this):e!==b.c.ACK&&new b.Transactions.NonInviteServerTransaction(a,this),e===b.c.OPTIONS&&a.reply(200,b.c.REASON_200,{Allow:b.c.ALLOWED_METHODS,Accept:b.c.ACCEPTED_BODY_TYPES});if(!a.to_tag){if(!this.registrator||this.registrator&&!this.registrator.registered){a.reply(410,b.c.REASON_410);return}switch(e){case b.c.MESSAGE:b.messageReceiver(this,a);break;case b.c.INVITE:b.utils.isWebRtcSupported()?new b.IncomingSession(this,a):console.warn(b.c.LOG_UA+"Call invitation received but rtcweb is not supported");break;case b.c.BYE:a.reply(481,b.c.REASON_481);break;case b.c.CANCEL:d=this.findSession(a),d?d.receiveRequest(a):console.warn(b.c.LOG_UA+"Received CANCEL request for a non existent session");break;case b.c.ACK:break;default:a.reply(405,b.c.REASON_405)}}else c=this.findDialog(a),c?c.receiveRequest(a):e===b.c.NOTIFY?(d=this.findSession(a),d?d.receiveRequest(a):(console.warn(b.c.LOG_UA+"Received a NOTIFY request for a non existent session"),a.reply(481,"Subscription does not exist"))):e!==b.c.ACK&&a.reply(481,b.c.REASON_481)},b.UA.prototype.findSession=function(a){var b=a.call_id+a.from_tag,c=this.sessions[b],d=a.call_id+a.to_tag,e=this.sessions[d];return c?c:e?e:null},b.UA.prototype.findDialog=function(a){var c=a.call_id+a.from_tag+a.to_tag,d=this.dialogs[c];return d?(console.log(b.c.LOG_UA+"dialogs","dialog found"),d):(c=a.call_id+a.to_tag+a.from_tag,d=this.dialogs[c],d?(console.log(b.c.LOG_UA+"dialogs","dialog found"),d):(console.log(b.c.LOG_UA+"dialogs","No dialog found"),null))},b.UA.prototype.getNextWsServer=function(){var a,b,c=[];for(a in this.configuration.outbound_proxy_set){b=this.configuration.outbound_proxy_set[a];if(b.status===2)continue;c.length===0?c.push(b):b.weight>c[0].weight?(c=[],c.push(b)):b.weight===c[0].weight&&c.push(b)}return a=Math.floor(Math.random()*c.length),c[a]},b.UA.prototype.closeSessionsOnTransportError=function(){var a;for(a in this.sessions)this.sessions[a].onTransportError();this.registrator&&this.registrator.onTransportClosed()},b.UA.prototype.loadConfig=function(a){var c,d,e,f,g,h,i,j,k={via_host:Math.random().toString(36).substr(2,12)+".invalid",register_expires:600,register_min_expires:120,auto_register:!0,secure_transport:!1,max_reconnection:3,reconnection_timeout:4,no_answer_timeout:30,stun_server:"stun.l.google.com:19302",hack_use_via_tcp:!1};if(typeof a.outbound_proxy_set=="string")a.outbound_proxy_set=[{host:a.outbound_proxy_set}];else if(a.outbound_proxy_set instanceof Array)for(f in a.outbound_proxy_set)typeof a.outbound_proxy_set[f]=="string"&&(a.outbound_proxy_set[f]={host:a.outbound_proxy_set[f]});for(c in b.UA.configuration_check.mandatory){d=a[c];if(!d)return console.error("Missing config parameter: "+c),!1;if(b.UA.configuration_check.mandatory[c](d))k[c]=d;else return console.error("Bad configuration parameter: "+c),!1}for(c in b.UA.configuration_check.optional){d=a[c];if(d)if(b.UA.configuration_check.optional[c](d))k[c]=d;else return console.error("Bad configuration parameter: "+c),!1}k.instance_id=b.utils.newUUID(),k.jssip_id=Math.random().toString(36).substr(2,5),g=b.grammar_sip.parse(k.uri,"lazy_uri"),k.user=g.user,k.domain=g.host,k.authorization_user||(k.authorization_user=k.user),k.from_uri=(g.scheme?"":"sip:")+k.uri,k.display_name&&(k.from_uri='"'+k.display_name+'" <'+k.from_uri+">"),k.no_answer_timeout=k.no_answer_timeout*1e3,k.via_core_value="SIP/2.0/"+(k.hack_use_via_tcp?"TCP":k.secure_transport?"WSS":"WS")+" "+k.via_host;for(f in a.outbound_proxy_set)i=b.grammar_sip.parse(k.outbound_proxy_set[f].host,"hostport"),k.outbound_proxy_set[f].ws_uri=(k.secure_transport?"wss":"ws")+"://"+i.host+(i.port?":"+i.port:""),k.outbound_proxy_set[f].ws_uri+=k.outbound_proxy_set[f].ws_path?"/"+k.outbound_proxy_set[f].ws_path:"/",k.outbound_proxy_set[f].ws_uri+=k.outbound_proxy_set[f].ws_query?"?"+k.outbound_proxy_set[f].ws_query:"",k.outbound_proxy_set[f].sip_uri="<sip:"+i.host+(i.port?":"+i.port:"")+";transport=ws;lr>",k.outbound_proxy_set[f].weight||(k.outbound_proxy_set[f].weight=0),k.outbound_proxy_set[f].status=0;j={uri:{value:"sip:"+g.user+"@"+k.via_host+";transport=ws",writable:!1,configurable:!1}},Object.defineProperties(this.contact,j);for(e in k)b.UA.configuration_skeleton[e].value=k[e];Object.defineProperties(this.configuration,b.UA.configuration_skeleton);for(e in k)b.UA.configuration_skeleton[e].value="";return!0},b.UA.configuration_skeleton=function(){var a,b,c={},d=["instance_id","jssip_id","max_reconnection","reconnection_timeout","register_min_expires","secure_transport","outbound_proxy_set","password","uri","authorization_user","auto_register","display_name","hack_use_via_tcp","stun_server","no_answer_timeout","register_expires","via_host","domain","from_uri","via_core_value","user"];for(a in d)b=d[a],c[b]={value:"",writable:!1,configurable:!1};return c}(),b.UA.configuration_check={mandatory:{outbound_proxy_set:function(a){var c,d;if(a.length===0)return!1;for(c in a){if(!a[c].host)return console.log(b.c.LOG_UA+'Missing "host" attribute in outbound_proxy_set parameter'),!1;if(a[c].weight&&!Number(a[c].weight))return console.log(b.c.LOG_UA+'"weight" attribute in outbound_proxy_set parameter must be a Number'),!1;d=b.grammar_sip.parse(a[c].host,"hostport");if(d===-1)return console.log(b.c.LOG_UA+'Invalid "host" attribute in outbound_proxy_set parameter: '+a[c].host),!1}return!0},uri:function(a){var c;return c=b.grammar_sip.parse(a,"lazy_uri"),c===-1?(console.log(b.c.LOG_UA+"Invalid uri: "+a),!1):c.host?!0:(console.log(b.c.LOG_UA+"Invalid uri. Missing uri domain."),!1)},password:function(a){return b.grammar_sip.parse(a,"password")===-1?!1:!0}},optional:{authorization_user:function(a){return b.grammar_sip.parse('"'+a+'"',"quoted_string")===-1?!1:!0},auto_register:function(a){return a!==!0&&a!==!1?(console.log(b.c.LOG_UA+"auto_register must be true or false"),!1):!0},display_name:function(a){return b.grammar_sip.parse(a,"display_name")===-1?!1:!0},via_host:function(a){return b.grammar_sip.parse(a,"host")===-1?!1:!0},secure_transport:function(a){return a!==!0&&a!==!1?!1:!0},register_expires:function(a){return Number(a)?!0:!1},stun_server:function(a){var c;return c=b.grammar_sip.parse(a,"hostport"),c===-1?(console.log(b.c.LOG_UA+"Invalid stun_server: "+a),!1):!0},no_answer_timeout:function(a){return Number(a)?a<0||a>600?!1:!0:!1},hack_use_via_tcp:function(a){return a!==!0&&a!==!1?!1:!0}}},b.utils={str_utf8_length:function(b){return a.unescape(encodeURIComponent(b)).length},isFunction:function(a){return a!==undefined?Object.prototype.toString.call(a)==="[object Function]"?!0:!1:!1},newTag:function(){return Math.random().toString(36).substr(2,b.c.TAG_LENGTH)},newUUID:function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a==="x"?b:b&3|8;return c.toString(16)});return a},checkUri:function(a){return a?b.grammar_sip.parse(a,"lazy_uri")===-1?!1:!0:!1},normalizeUri:function(a,c){var d,e,f;if(!b.utils.checkUri(a)){console.log("Invalid target: "+a);return}d=b.grammar_sip.parse(a,"lazy_uri");if(!d.host&&!c){console.log("No domain specified in target nor as function parameter");return}f=d.scheme?d.scheme+":":"sip:",f+=d.user,f+="@"+(d.host?d.host:c),f+=d.port?":"+d.port:"";for(e in d.params)f+=";"+e,f+=d.params[e]===!0?"":"="+d.params[e];return f},headerize:function(a){var b={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},c=a.toLowerCase().replace(/_/g,"-").split("-"),d="",e;for(e in c)e!=="0"&&(d+="-"),d+=c[e].charAt(0).toUpperCase()+c[e].substring(1);return b[d]&&(d=b[d]),d},isWebRtcSupported:function(){return typeof a.webkitPeerConnection00=="undefined"?!1:typeof navigator.webkitGetUserMedia=="undefined"?!1:!0},MD5:function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=a&2147483648,f=b&2147483648,c=a&1073741824,d=b&1073741824,g=(a&1073741823)+(b&1073741823),c&d?g^2147483648^e^f:c|d?g&1073741824?g^3221225472^e^f:g^1073741824^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){var b,c=a.length,d=c+8,e=(d-d%64)/64,f=(e+1)*16,g=Array(f-1),h=0,i=0;while(i<c)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b="",c="",d,e;for(e=0;e<=3;e++)d=a>>>e*8&255,c="0"+d.toString(16),b=b+c.substr(c.length-2,2);return b}function n(a){a=a.replace(/\r\n/g,"\n");var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128))}return b}var o=[],p,q,r,s,t,u,v,w,x,y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;a=n(a),o=l(a),u=1732584193,v=4023233417,w=2562383102,x=271733878;for(p=0;p<o.length;p+=16)q=u,r=v,s=w,t=x,u=h(u,v,w,x,o[p+0],y,3614090360),x=h(x,u,v,w,o[p+1],z,3905402710),w=h(w,x,u,v,o[p+2],A,606105819),v=h(v,w,x,u,o[p+3],B,3250441966),u=h(u,v,w,x,o[p+4],y,4118548399),x=h(x,u,v,w,o[p+5],z,1200080426),w=h(w,x,u,v,o[p+6],A,2821735955),v=h(v,w,x,u,o[p+7],B,4249261313),u=h(u,v,w,x,o[p+8],y,1770035416),x=h(x,u,v,w,o[p+9],z,2336552879),w=h(w,x,u,v,o[p+10],A,4294925233),v=h(v,w,x,u,o[p+11],B,2304563134),u=h(u,v,w,x,o[p+12],y,1804603682),x=h(x,u,v,w,o[p+13],z,4254626195),w=h(w,x,u,v,o[p+14],A,2792965006),v=h(v,w,x,u,o[p+15],B,1236535329),u=i(u,v,w,x,o[p+1],C,4129170786),x=i(x,u,v,w,o[p+6],D,3225465664),w=i(w,x,u,v,o[p+11],E,643717713),v=i(v,w,x,u,o[p+0],F,3921069994),u=i(u,v,w,x,o[p+5],C,3593408605),x=i(x,u,v,w,o[p+10],D,38016083),w=i(w,x,u,v,o[p+15],E,3634488961),v=i(v,w,x,u,o[p+4],F,3889429448),u=i(u,v,w,x,o[p+9],C,568446438),x=i(x,u,v,w,o[p+14],D,3275163606),w=i(w,x,u,v,o[p+3],E,4107603335),v=i(v,w,x,u,o[p+8],F,1163531501),u=i(u,v,w,x,o[p+13],C,2850285829),x=i(x,u,v,w,o[p+2],D,4243563512),w=i(w,x,u,v,o[p+7],E,1735328473),v=i(v,w,x,u,o[p+12],F,2368359562),u=j(u,v,w,x,o[p+5],G,4294588738),x=j(x,u,v,w,o[p+8],H,2272392833),w=j(w,x,u,v,o[p+11],I,1839030562),v=j(v,w,x,u,o[p+14],J,4259657740),u=j(u,v,w,x,o[p+1],G,2763975236),x=j(x,u,v,w,o[p+4],H,1272893353),w=j(w,x,u,v,o[p+7],I,4139469664),v=j(v,w,x,u,o[p+10],J,3200236656),u=j(u,v,w,x,o[p+13],G,681279174),x=j(x,u,v,w,o[p+0],H,3936430074),w=j(w,x,u,v,o[p+3],I,3572445317),v=j(v,w,x,u,o[p+6],J,76029189),u=j(u,v,w,x,o[p+9],G,3654602809),x=j(x,u,v,w,o[p+12],H,3873151461),w=j(w,x,u,v,o[p+15],I,530742520),v=j(v,w,x,u,o[p+2],J,3299628645),u=k(u,v,w,x,o[p+0],K,4096336452),x=k(x,u,v,w,o[p+7],L,1126891415),w=k(w,x,u,v,o[p+14],M,2878612391),v=k(v,w,x,u,o[p+5],N,4237533241),u=k(u,v,w,x,o[p+12],K,1700485571),x=k(x,u,v,w,o[p+3],L,2399980690),w=k(w,x,u,v,o[p+10],M,4293915773),v=k(v,w,x,u,o[p+1],N,2240044497),u=k(u,v,w,x,o[p+8],K,1873313359),x=k(x,u,v,w,o[p+15],L,4264355552),w=k(w,x,u,v,o[p+6],M,2734768916),v=k(v,w,x,u,o[p+13],N,1309151649),u=k(u,v,w,x,o[p+4],K,4149444226),x=k(x,u,v,w,o[p+11],L,3174756917),w=k(w,x,u,v,o[p+2],M,718787259),v=k(v,w,x,u,o[p+9],N,3951481745),u=c(u,q),v=c(v,r),w=c(w,s),x=c(x,t);var O=m(u)+m(v)+m(w)+m(x);return O.toLowerCase()}},b.sanityCheck=function(){function h(){if(e.s("to").scheme!=="sip")return p(416,b.c.REASON_416),!1}function i(){if(!e.to_tag&&e.call_id.substr(0,5)===f.configuration.jssip_id)return p(482,b.c.REASON_482),!1}function j(){var a=b.utils.str_utf8_length(e.body),c=e.getHeader("content-length");if(a<c)return p(400,b.c.REASON_400),!1}function k(){var a,c,d=e.from_tag,g=e.call_id,h=e.cseq;if(!e.to_tag)if(e.method===b.c.INVITE){a=f.transactions.ist[e.via_branch];if(!a)return;for(c in f.transactions.ist){a=f.transactions.ist[c];if(a.request.from_tag===d&&a.request.call_id===g&&a.request.cseq===h)return p(482,b.c.REASON_482),!1}}else{a=f.transactions.nist[e.via_branch];if(!a)return;for(c in f.transactions.nist){a=f.transactions.nist[c];if(a.request.from_tag===d&&a.request.call_id===g&&a.request.cseq===h)return p(482,b.c.REASON_482),!1}}}function l(){if(e.countHeader("via")>1)return!1}function m(){var a=f.configuration.via_host;if(e.via.host!==a)return!1}function n(){var a=b.utils.str_utf8_length(e.body),c=e.getHeader("content-length");if(a<c)return!1}function o(){var a=["from","to","call_id","cseq","via"],b=a.length;while(b--)if(!e.hasHeader(a[b]))return!1}function p(a,c){var d,f="SIP/2.0 "+a+" "+c+"\r\n",h=e.countHeader("via"),i=0;for(i;i<h;i++)f+="Via: "+e.getHeader("via",i)+"\r\n";d=e.to,e.to_tag||(d+=";tag="+b.utils.newTag()),f+="To: "+d+"\r\n",f+="From: "+e.from+"\r\n",f+="Call-ID: "+e.call_id+"\r\n",f+="CSeq: "+e.cseq+" "+e.method+"\r\n",f+="\r\n",g.send(f)}var a=[],c=[],d=[],e,f,g;return a.push(h),a.push(i),a.push(j),a.push(k),c.push(l),c.push(m),c.push(n),d.push(o),function(h,i,j){var k,l;e=h,f=i,g=j,k=d.lengt;while(k--){l=d[k](e);if(l===!1)return!1}if(e instanceof b.IncomingRequest){k=a.length;while(k--){l=a[k](e);if(l===!1)return!1}}else if(e instanceof b.IncomingResponse){k=c.length;while(k--){l=c[k](e);if(l===!1)return!1}}return!0}}(),b.DigestAuthentication=function(a,c,d){var e,f,g,h,i={},j="",k="00000001",l=Math.random().toString(36).substr(2,12),m={username:a.configuration.authorization_user,password:a.configuration.password};d.status_code==="401"?e=d.parseHeader("www-authenticate"):e=d.parseHeader("proxy-authenticate"),d={realm:e.realm.replace(/"/g,""),qop:e.qop||null,nonce:e.nonce.replace(/"/g,"")},f=b.utils.MD5(m.username+":"+d.realm+":"+m.password);switch(d.qop){case"auth-int":g=b.utils.MD5(c.method+":"+c.ruri+":"+b.utils.MD5(c.body?c.body:""));break;default:g=b.utils.MD5(c.method+":"+c.ruri)}d.qop?d=b.utils.MD5(f+":"+d.nonce+":"+k+":"+l+":"+d.qop+":"+g):d=b.utils.MD5(f+":"+d.nonce+":"+g),i.username='"'+m.username+'"',i.realm=e.realm,i.nonce=e.nonce,i.uri='"'+c.ruri+'"',i.qop=e.qop||null,i.response='"'+d+'"',i.algorithm="MD5",i.opaque=e.opaque||null,i.cnonce=e.qop?l:null,i.nc=e.qop?k:null;for(h in i)i[h]!==null&&(j+=","+h+"="+i[h]);return"Digest "+j.substr(1)},a.JsSIP=b})(window);
JsSIP.grammar_sip=(function(){function b(c){return'"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var a={parse:function(aP,cT){var T={CRLF:x,DIGIT:bt,ALPHA:bC,HEXDIG:aT,WSP:bl,OCTET:cx,DQUOTE:cl,SP:m,HTAB:q,alphanum:ay,reserved:J,unreserved:bY,mark:aF,escaped:V,LWS:cb,SWS:ag,HCOLON:a4,TEXT_UTF8_TRIM:cm,TEXT_UTF8char:bc,UTF8_NONASCII:bs,UTF8_CONT:bV,LHEX:by,token:bA,token_nodot:E,separators:cD,word:aU,STAR:aK,SLASH:ap,EQUAL:bq,LPAREN:bj,RPAREN:z,RAQUOT:aZ,LAQUOT:cu,COMMA:cf,SEMI:v,COLON:L,LDQUOT:r,RDQUOT:br,comment:ce,ctext:j,quoted_string:cF,qdtext:bh,quoted_pair:ai,SIP_URI_simple:K,SIP_URI:y,uri_scheme:cP,userinfo:a9,user:cW,user_unreserved:A,password:af,hostport:bU,host:t,hostname:cj,domainlabel:bD,toplabel:Z,IPv6reference:aL,IPv6address:aN,h16:bS,ls32:Y,IPv4address:bX,dec_octet:b9,port:ck,uri_parameters:S,uri_parameter:an,transport_param:cM,user_param:bu,method_param:cs,ttl_param:cG,maddr_param:cJ,lr_param:a8,other_param:bo,pname:i,pvalue:b7,paramchar:bM,param_unreserved:bz,headers:al,header:ci,hname:ak,hvalue:bW,hnv_unreserved:bQ,Request_Response:bZ,Request_Line:cX,Request_URI:bi,absoluteURI:cC,hier_part:B,net_path:cz,abs_path:cc,opaque_part:aa,uric:Q,uric_no_slash:o,path_segments:aA,segment:bE,param:ba,pchar:f,scheme:bG,authority:M,srvr:bI,reg_name:cA,query:b2,SIP_Version:bd,INVITEm:bP,ACKm:ae,OPTIONSm:O,BYEm:b3,CANCELm:a2,REGISTERm:aD,SUBSCRIBEm:aE,NOTIFYm:cd,Method:am,Status_Line:bf,Status_Code:aw,extension_code:cU,Reason_Phrase:at,Allow_Events:ct,Call_ID:ah,Contact:b8,contact_param:cB,name_addr:a3,addr_spec:aQ,addr_spec_simple:cn,display_name:av,contact_params:cg,c_p_q:cv,c_p_expires:aX,contact_extension:aY,delta_seconds:cV,qvalue:u,generic_param:aJ,gen_value:cQ,Content_Disposition:aM,disp_type:b1,disp_param:cS,handling_param:bB,Content_Encoding:aH,Content_Length:ad,Content_Type:bL,media_type:ca,m_type:aS,discrete_type:aO,composite_type:bT,extension_token:h,x_token:a1,m_subtype:I,m_parameter:bp,m_value:aj,CSeq:aV,CSeq_value:g,Expires:ar,Event:bR,event_type:bO,event_param:bK,From:bb,from_param:cI,tag_param:aG,Max_Forwards:aW,Min_Expires:b6,Proxy_Authenticate:cN,challenge:cR,other_challenge:aC,auth_param:n,digest_cln:cE,realm:bm,realm_value:d,domain:cy,URI:bJ,nonce:e,nonce_value:aB,opaque:bN,stale:bk,algorithm:D,qop_options:bn,qop_value:F,Proxy_Require:l,Record_Route:w,rec_route:aI,Require:k,Route:cL,route_param:az,Subscription_State:a6,substate_value:bw,subexp_params:bv,event_reason_value:ac,Subject:G,Supported:a0,To:ch,to_param:cq,Via:ab,via_parm:a7,via_params:bH,via_ttl:P,via_maddr:W,via_received:au,via_branch:b5,response_port:H,sent_protocol:bx,protocol_name:a5,transport:c,sent_by:U,via_host:be,via_port:ax,ttl:s,WWW_Authenticate:b4,extension_header:aR,header_value:C,message_body:cp,lazy_uri:co};if(cT!==undefined){if(T[cT]===undefined){throw new Error("Invalid rule name: "+b(cT)+".")}}else{cT="CRLF"}var bF=0;var R=0;var p=0;var cK=[];function b0(cZ,c3,c1){var cY=cZ;var c2=c1-cZ.length;for(var c0=0;c0<c2;c0++){cY=c3+cY}return cY}function aq(c0){var cZ=c0.charCodeAt(0);var cY;var c1;if(cZ<=255){cY="x";c1=2}else{cY="u";c1=4}return"\\"+cY+b0(cZ.toString(16).toUpperCase(),"0",c1)}function ao(cY){if(bF<p){return}if(bF>p){p=bF;cK=[]}cK.push(cY)}function x(){var cY;if(aP.substr(bF,2)==="\r\n"){cY="\r\n";bF+=2}else{cY=null;if(R===0){ao('"\\r\\n"')}}return cY}function bt(){var cY;if(/^[0-9]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[0-9]")}}return cY}function bC(){var cY;if(/^[a-zA-Z]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[a-zA-Z]")}}return cY}function aT(){var cY;if(/^[0-9a-fA-F]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[0-9a-fA-F]")}}return cY}function bl(){var cY;cY=m();if(cY===null){cY=q()}return cY}function cx(){var cY;if(/^[\0-\xFF]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[\\0-\\xFF]")}}return cY}function cl(){var cY;if(/^["]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao('["]')}}return cY}function m(){var cY;if(aP.charCodeAt(bF)===32){cY=" ";bF++}else{cY=null;if(R===0){ao('" "')}}return cY}function q(){var cY;if(aP.charCodeAt(bF)===9){cY="\t";bF++}else{cY=null;if(R===0){ao('"\\t"')}}return cY}function ay(){var cY;if(/^[a-zA-Z0-9]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[a-zA-Z0-9]")}}return cY}function J(){var cY;if(aP.charCodeAt(bF)===59){cY=";";bF++}else{cY=null;if(R===0){ao('";"')}}if(cY===null){if(aP.charCodeAt(bF)===47){cY="/";bF++}else{cY=null;if(R===0){ao('"/"')}}if(cY===null){if(aP.charCodeAt(bF)===63){cY="?";bF++}else{cY=null;if(R===0){ao('"?"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===64){cY="@";bF++}else{cY=null;if(R===0){ao('"@"')}}if(cY===null){if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}}}}}}}}}}return cY}function bY(){var cY;cY=ay();if(cY===null){cY=aF()}return cY}function aF(){var cY;if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===95){cY="_";bF++}else{cY=null;if(R===0){ao('"_"')}}if(cY===null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}if(cY===null){if(aP.charCodeAt(bF)===33){cY="!";bF++}else{cY=null;if(R===0){ao('"!"')}}if(cY===null){if(aP.charCodeAt(bF)===126){cY="~";bF++}else{cY=null;if(R===0){ao('"~"')}}if(cY===null){if(aP.charCodeAt(bF)===42){cY="*";bF++}else{cY=null;if(R===0){ao('"*"')}}if(cY===null){if(aP.charCodeAt(bF)===39){cY="'";bF++}else{cY=null;if(R===0){ao('"\'"')}}if(cY===null){if(aP.charCodeAt(bF)===40){cY="(";bF++}else{cY=null;if(R===0){ao('"("')}}if(cY===null){if(aP.charCodeAt(bF)===41){cY=")";bF++}else{cY=null;if(R===0){ao('")"')}}}}}}}}}}return cY}function V(){var c0,cZ,cY;var c1;c1=bF;if(aP.charCodeAt(bF)===37){c0="%";bF++}else{c0=null;if(R===0){ao('"%"')}}if(c0!==null){cZ=aT();if(cZ!==null){cY=aT();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function cb(){var c2,c0,cY;var c3,c1,cZ;c3=bF;c1=bF;cZ=bF;c2=[];c0=bl();while(c0!==null){c2.push(c0);c0=bl()}if(c2!==null){c0=x();if(c0!==null){c2=[c2,c0]}else{c2=null;bF=cZ}}else{c2=null;bF=cZ}c2=c2!==null?c2:"";if(c2!==null){cY=bl();if(cY!==null){c0=[];while(cY!==null){c0.push(cY);cY=bl()}}else{c0=null}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c1}}else{c2=null;bF=c1}if(c2!==null){c2=(function(c4){return" "})(c3)}if(c2===null){bF=c3}return c2}function ag(){var cY;cY=cb();cY=cY!==null?cY:"";return cY}function a4(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=[];cZ=m();if(cZ===null){cZ=q()}while(cZ!==null){c1.push(cZ);cZ=m();if(cZ===null){cZ=q()}}if(c1!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return":"})(c2)}if(c1===null){bF=c2}return c1}function cm(){var c3,c1,cZ,cY;var c4,c2,c0;c4=bF;c2=bF;c1=bc();if(c1!==null){c3=[];while(c1!==null){c3.push(c1);c1=bc()}}else{c3=null}if(c3!==null){c1=[];c0=bF;cZ=[];cY=cb();while(cY!==null){cZ.push(cY);cY=cb()}if(cZ!==null){cY=bc();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}while(cZ!==null){c1.push(cZ);c0=bF;cZ=[];cY=cb();while(cY!==null){cZ.push(cY);cY=cb()}if(cZ!==null){cY=bc();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}}if(c1!==null){c3=[c3,c1]}else{c3=null;bF=c2}}else{c3=null;bF=c2}if(c3!==null){c3=(function(c5){return aP.substring(bF,c5)})(c4)}if(c3===null){bF=c4}return c3}function bc(){var cY;if(/^[!-~]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[!-~]")}}if(cY===null){cY=bs()}return cY}function bs(){var cY;if(/^[\x80-\xFF]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[\\x80-\\xFF]")}}return cY}function bV(){var cY;if(/^[\x80-\xBF]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[\\x80-\\xBF]")}}return cY}function by(){var cY;cY=bt();if(cY===null){if(/^[a-f]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[a-f]")}}}return cY}function bA(){var cZ,cY;var c0;c0=bF;cY=ay();if(cY===null){if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}if(cY===null){if(aP.charCodeAt(bF)===33){cY="!";bF++}else{cY=null;if(R===0){ao('"!"')}}if(cY===null){if(aP.charCodeAt(bF)===37){cY="%";bF++}else{cY=null;if(R===0){ao('"%"')}}if(cY===null){if(aP.charCodeAt(bF)===42){cY="*";bF++}else{cY=null;if(R===0){ao('"*"')}}if(cY===null){if(aP.charCodeAt(bF)===95){cY="_";bF++}else{cY=null;if(R===0){ao('"_"')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===96){cY="`";bF++}else{cY=null;if(R===0){ao('"`"')}}if(cY===null){if(aP.charCodeAt(bF)===39){cY="'";bF++}else{cY=null;if(R===0){ao('"\'"')}}if(cY===null){if(aP.charCodeAt(bF)===126){cY="~";bF++}else{cY=null;if(R===0){ao('"~"')}}}}}}}}}}}}if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=ay();if(cY===null){if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}if(cY===null){if(aP.charCodeAt(bF)===33){cY="!";bF++}else{cY=null;if(R===0){ao('"!"')}}if(cY===null){if(aP.charCodeAt(bF)===37){cY="%";bF++}else{cY=null;if(R===0){ao('"%"')}}if(cY===null){if(aP.charCodeAt(bF)===42){cY="*";bF++}else{cY=null;if(R===0){ao('"*"')}}if(cY===null){if(aP.charCodeAt(bF)===95){cY="_";bF++}else{cY=null;if(R===0){ao('"_"')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===96){cY="`";bF++}else{cY=null;if(R===0){ao('"`"')}}if(cY===null){if(aP.charCodeAt(bF)===39){cY="'";bF++}else{cY=null;if(R===0){ao('"\'"')}}if(cY===null){if(aP.charCodeAt(bF)===126){cY="~";bF++}else{cY=null;if(R===0){ao('"~"')}}}}}}}}}}}}}}else{cZ=null}if(cZ!==null){cZ=(function(c1){return aP.substring(bF,c1)})(c0)}if(cZ===null){bF=c0}return cZ}function E(){var cZ,cY;var c0;c0=bF;cY=ay();if(cY===null){if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===33){cY="!";bF++}else{cY=null;if(R===0){ao('"!"')}}if(cY===null){if(aP.charCodeAt(bF)===37){cY="%";bF++}else{cY=null;if(R===0){ao('"%"')}}if(cY===null){if(aP.charCodeAt(bF)===42){cY="*";bF++}else{cY=null;if(R===0){ao('"*"')}}if(cY===null){if(aP.charCodeAt(bF)===95){cY="_";bF++}else{cY=null;if(R===0){ao('"_"')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===96){cY="`";bF++}else{cY=null;if(R===0){ao('"`"')}}if(cY===null){if(aP.charCodeAt(bF)===39){cY="'";bF++}else{cY=null;if(R===0){ao('"\'"')}}if(cY===null){if(aP.charCodeAt(bF)===126){cY="~";bF++}else{cY=null;if(R===0){ao('"~"')}}}}}}}}}}}if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=ay();if(cY===null){if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===33){cY="!";bF++}else{cY=null;if(R===0){ao('"!"')}}if(cY===null){if(aP.charCodeAt(bF)===37){cY="%";bF++}else{cY=null;if(R===0){ao('"%"')}}if(cY===null){if(aP.charCodeAt(bF)===42){cY="*";bF++}else{cY=null;if(R===0){ao('"*"')}}if(cY===null){if(aP.charCodeAt(bF)===95){cY="_";bF++}else{cY=null;if(R===0){ao('"_"')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===96){cY="`";bF++}else{cY=null;if(R===0){ao('"`"')}}if(cY===null){if(aP.charCodeAt(bF)===39){cY="'";bF++}else{cY=null;if(R===0){ao('"\'"')}}if(cY===null){if(aP.charCodeAt(bF)===126){cY="~";bF++}else{cY=null;if(R===0){ao('"~"')}}}}}}}}}}}}}else{cZ=null}if(cZ!==null){cZ=(function(c1){return aP.substring(bF,c1)})(c0)}if(cZ===null){bF=c0}return cZ}function cD(){var cY;if(aP.charCodeAt(bF)===40){cY="(";bF++}else{cY=null;if(R===0){ao('"("')}}if(cY===null){if(aP.charCodeAt(bF)===41){cY=")";bF++}else{cY=null;if(R===0){ao('")"')}}if(cY===null){if(aP.charCodeAt(bF)===60){cY="<";bF++}else{cY=null;if(R===0){ao('"<"')}}if(cY===null){if(aP.charCodeAt(bF)===62){cY=">";bF++}else{cY=null;if(R===0){ao('">"')}}if(cY===null){if(aP.charCodeAt(bF)===64){cY="@";bF++}else{cY=null;if(R===0){ao('"@"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}if(cY===null){if(aP.charCodeAt(bF)===59){cY=";";bF++}else{cY=null;if(R===0){ao('";"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===92){cY="\\";bF++}else{cY=null;if(R===0){ao('"\\\\"')}}if(cY===null){cY=cl();if(cY===null){if(aP.charCodeAt(bF)===47){cY="/";bF++}else{cY=null;if(R===0){ao('"/"')}}if(cY===null){if(aP.charCodeAt(bF)===91){cY="[";bF++}else{cY=null;if(R===0){ao('"["')}}if(cY===null){if(aP.charCodeAt(bF)===93){cY="]";bF++}else{cY=null;if(R===0){ao('"]"')}}if(cY===null){if(aP.charCodeAt(bF)===63){cY="?";bF++}else{cY=null;if(R===0){ao('"?"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===123){cY="{";bF++}else{cY=null;if(R===0){ao('"{"')}}if(cY===null){if(aP.charCodeAt(bF)===125){cY="}";bF++}else{cY=null;if(R===0){ao('"}"')}}if(cY===null){cY=m();if(cY===null){cY=q()}}}}}}}}}}}}}}}}}}return cY}function aU(){var cZ,cY;var c0;c0=bF;cY=ay();if(cY===null){if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}if(cY===null){if(aP.charCodeAt(bF)===33){cY="!";bF++}else{cY=null;if(R===0){ao('"!"')}}if(cY===null){if(aP.charCodeAt(bF)===37){cY="%";bF++}else{cY=null;if(R===0){ao('"%"')}}if(cY===null){if(aP.charCodeAt(bF)===42){cY="*";bF++}else{cY=null;if(R===0){ao('"*"')}}if(cY===null){if(aP.charCodeAt(bF)===95){cY="_";bF++}else{cY=null;if(R===0){ao('"_"')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===96){cY="`";bF++}else{cY=null;if(R===0){ao('"`"')}}if(cY===null){if(aP.charCodeAt(bF)===39){cY="'";bF++}else{cY=null;if(R===0){ao('"\'"')}}if(cY===null){if(aP.charCodeAt(bF)===126){cY="~";bF++}else{cY=null;if(R===0){ao('"~"')}}if(cY===null){if(aP.charCodeAt(bF)===40){cY="(";bF++}else{cY=null;if(R===0){ao('"("')}}if(cY===null){if(aP.charCodeAt(bF)===41){cY=")";bF++}else{cY=null;if(R===0){ao('")"')}}if(cY===null){if(aP.charCodeAt(bF)===60){cY="<";bF++}else{cY=null;if(R===0){ao('"<"')}}if(cY===null){if(aP.charCodeAt(bF)===62){cY=">";bF++}else{cY=null;if(R===0){ao('">"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===92){cY="\\";bF++}else{cY=null;if(R===0){ao('"\\\\"')}}if(cY===null){cY=cl();if(cY===null){if(aP.charCodeAt(bF)===47){cY="/";bF++}else{cY=null;if(R===0){ao('"/"')}}if(cY===null){if(aP.charCodeAt(bF)===91){cY="[";bF++}else{cY=null;if(R===0){ao('"["')}}if(cY===null){if(aP.charCodeAt(bF)===93){cY="]";bF++}else{cY=null;if(R===0){ao('"]"')}}if(cY===null){if(aP.charCodeAt(bF)===63){cY="?";bF++}else{cY=null;if(R===0){ao('"?"')}}if(cY===null){if(aP.charCodeAt(bF)===123){cY="{";bF++}else{cY=null;if(R===0){ao('"{"')}}if(cY===null){if(aP.charCodeAt(bF)===125){cY="}";bF++}else{cY=null;if(R===0){ao('"}"')}}}}}}}}}}}}}}}}}}}}}}}}}if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=ay();if(cY===null){if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}if(cY===null){if(aP.charCodeAt(bF)===33){cY="!";bF++}else{cY=null;if(R===0){ao('"!"')}}if(cY===null){if(aP.charCodeAt(bF)===37){cY="%";bF++}else{cY=null;if(R===0){ao('"%"')}}if(cY===null){if(aP.charCodeAt(bF)===42){cY="*";bF++}else{cY=null;if(R===0){ao('"*"')}}if(cY===null){if(aP.charCodeAt(bF)===95){cY="_";bF++}else{cY=null;if(R===0){ao('"_"')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===96){cY="`";bF++}else{cY=null;if(R===0){ao('"`"')}}if(cY===null){if(aP.charCodeAt(bF)===39){cY="'";bF++}else{cY=null;if(R===0){ao('"\'"')}}if(cY===null){if(aP.charCodeAt(bF)===126){cY="~";bF++}else{cY=null;if(R===0){ao('"~"')}}if(cY===null){if(aP.charCodeAt(bF)===40){cY="(";bF++}else{cY=null;if(R===0){ao('"("')}}if(cY===null){if(aP.charCodeAt(bF)===41){cY=")";bF++}else{cY=null;if(R===0){ao('")"')}}if(cY===null){if(aP.charCodeAt(bF)===60){cY="<";bF++}else{cY=null;if(R===0){ao('"<"')}}if(cY===null){if(aP.charCodeAt(bF)===62){cY=">";bF++}else{cY=null;if(R===0){ao('">"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===92){cY="\\";bF++}else{cY=null;if(R===0){ao('"\\\\"')}}if(cY===null){cY=cl();if(cY===null){if(aP.charCodeAt(bF)===47){cY="/";bF++}else{cY=null;if(R===0){ao('"/"')}}if(cY===null){if(aP.charCodeAt(bF)===91){cY="[";bF++}else{cY=null;if(R===0){ao('"["')}}if(cY===null){if(aP.charCodeAt(bF)===93){cY="]";bF++}else{cY=null;if(R===0){ao('"]"')}}if(cY===null){if(aP.charCodeAt(bF)===63){cY="?";bF++}else{cY=null;if(R===0){ao('"?"')}}if(cY===null){if(aP.charCodeAt(bF)===123){cY="{";bF++}else{cY=null;if(R===0){ao('"{"')}}if(cY===null){if(aP.charCodeAt(bF)===125){cY="}";bF++}else{cY=null;if(R===0){ao('"}"')}}}}}}}}}}}}}}}}}}}}}}}}}}}else{cZ=null}if(cZ!==null){cZ=(function(c1){return aP.substring(bF,c1)})(c0)}if(cZ===null){bF=c0}return cZ}function aK(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=ag();if(c1!==null){if(aP.charCodeAt(bF)===42){cZ="*";bF++}else{cZ=null;if(R===0){ao('"*"')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return"*"})(c2)}if(c1===null){bF=c2}return c1}function ap(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=ag();if(c1!==null){if(aP.charCodeAt(bF)===47){cZ="/";bF++}else{cZ=null;if(R===0){ao('"/"')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return"/"})(c2)}if(c1===null){bF=c2}return c1}function bq(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=ag();if(c1!==null){if(aP.charCodeAt(bF)===61){cZ="=";bF++}else{cZ=null;if(R===0){ao('"="')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return"="})(c2)}if(c1===null){bF=c2}return c1}function bj(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=ag();if(c1!==null){if(aP.charCodeAt(bF)===40){cZ="(";bF++}else{cZ=null;if(R===0){ao('"("')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return"("})(c2)}if(c1===null){bF=c2}return c1}function z(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=ag();if(c1!==null){if(aP.charCodeAt(bF)===41){cZ=")";bF++}else{cZ=null;if(R===0){ao('")"')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return")"})(c2)}if(c1===null){bF=c2}return c1}function aZ(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;if(aP.charCodeAt(bF)===62){c0=">";bF++}else{c0=null;if(R===0){ao('">"')}}if(c0!==null){cY=ag();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c2){return">"})(c1)}if(c0===null){bF=c1}return c0}function cu(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;c0=ag();if(c0!==null){if(aP.charCodeAt(bF)===60){cY="<";bF++}else{cY=null;if(R===0){ao('"<"')}}if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c2){return"<"})(c1)}if(c0===null){bF=c1}return c0}function cf(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=ag();if(c1!==null){if(aP.charCodeAt(bF)===44){cZ=",";bF++}else{cZ=null;if(R===0){ao('","')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return","})(c2)}if(c1===null){bF=c2}return c1}function v(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=ag();if(c1!==null){if(aP.charCodeAt(bF)===59){cZ=";";bF++}else{cZ=null;if(R===0){ao('";"')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return";"})(c2)}if(c1===null){bF=c2}return c1}function L(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=ag();if(c1!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=ag();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){return":"})(c2)}if(c1===null){bF=c2}return c1}function r(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;c0=ag();if(c0!==null){cY=cl();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c2){return'"'})(c1)}if(c0===null){bF=c1}return c0}function br(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;c0=cl();if(c0!==null){cY=ag();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c2){return'"'})(c1)}if(c0===null){bF=c1}return c0}function ce(){var c0,cZ,cY;var c1;c1=bF;c0=bj();if(c0!==null){cZ=[];cY=j();if(cY===null){cY=ai();if(cY===null){cY=ce()}}while(cY!==null){cZ.push(cY);cY=j();if(cY===null){cY=ai();if(cY===null){cY=ce()}}}if(cZ!==null){cY=z();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function j(){var cY;if(/^[!-']/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[!-']")}}if(cY===null){if(/^[*-[]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[*-[]")}}if(cY===null){if(/^[\]-~]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[\\]-~]")}}if(cY===null){cY=bs();if(cY===null){cY=cb()}}}}return cY}function cF(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c1=bF;c2=ag();if(c2!==null){c0=cl();if(c0!==null){cZ=[];cY=bh();if(cY===null){cY=ai()}while(cY!==null){cZ.push(cY);cY=bh();if(cY===null){cY=ai()}}if(cZ!==null){cY=cl();if(cY!==null){c2=[c2,c0,cZ,cY]}else{c2=null;bF=c1}}else{c2=null;bF=c1}}else{c2=null;bF=c1}}else{c2=null;bF=c1}if(c2!==null){c2=(function(c4){return aP.substring(bF,c4)})(c3)}if(c2===null){bF=c3}return c2}function bh(){var cY;cY=cb();if(cY===null){if(aP.charCodeAt(bF)===33){cY="!";bF++}else{cY=null;if(R===0){ao('"!"')}}if(cY===null){if(/^[#-[]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[#-[]")}}if(cY===null){if(/^[\]-~]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[\\]-~]")}}if(cY===null){cY=bs()}}}}return cY}function ai(){var cZ,cY;var c0;c0=bF;if(aP.charCodeAt(bF)===92){cZ="\\";bF++}else{cZ=null;if(R===0){ao('"\\\\"')}}if(cZ!==null){if(/^[\0-\t]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[\\0-\\t]")}}if(cY===null){if(/^[\x0B-\f]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[\\x0B-\\f]")}}if(cY===null){if(/^[\x0E-]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[\\x0E-]")}}}}if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}return cZ}function K(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c1=bF;c2=cP();if(c2!==null){if(aP.charCodeAt(bF)===58){c0=":";bF++}else{c0=null;if(R===0){ao('":"')}}if(c0!==null){cZ=a9();cZ=cZ!==null?cZ:"";if(cZ!==null){cY=bU();if(cY!==null){c2=[c2,c0,cZ,cY]}else{c2=null;bF=c1}}else{c2=null;bF=c1}}else{c2=null;bF=c1}}else{c2=null;bF=c1}if(c2!==null){c2=(function(c4){cw.uri=aP.substring(bF,c4)})(c3)}if(c2===null){bF=c3}return c2}function y(){var c4,c2,c1,c0,cZ,cY;var c5,c3;c5=bF;c3=bF;c4=cP();if(c4!==null){if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c1=a9();c1=c1!==null?c1:"";if(c1!==null){c0=bU();if(c0!==null){cZ=S();if(cZ!==null){cY=al();cY=cY!==null?cY:"";if(cY!==null){c4=[c4,c2,c1,c0,cZ,cY]}else{c4=null;bF=c3}}else{c4=null;bF=c3}}else{c4=null;bF=c3}}else{c4=null;bF=c3}}else{c4=null;bF=c3}}else{c4=null;bF=c3}if(c4!==null){c4=(function(c6){cw.uri=aP.substring(bF,c6)})(c5)}if(c4===null){bF=c5}return c4}function cP(){var cY;var cZ;cZ=bF;if(aP.substr(bF,3)==="sip"){cY="sip";bF+=3}else{cY=null;if(R===0){ao('"sip"')}}if(cY!==null){cY=(function(c1,c0){cw.scheme=c0})(cZ,cY)}if(cY===null){bF=cZ}return cY}function a9(){var cZ,cY;var c0;c0=bF;cZ=cW();if(cZ!==null){if(aP.charCodeAt(bF)===64){cY="@";bF++}else{cY=null;if(R===0){ao('"@"')}}if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}return cZ}function cW(){var cZ,cY;var c0;c0=bF;cY=bY();if(cY===null){cY=V();if(cY===null){cY=A()}}if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bY();if(cY===null){cY=V();if(cY===null){cY=A()}}}}else{cZ=null}if(cZ!==null){cZ=(function(c1){cw.user=aP.substring(bF,c1)})(c0)}if(cZ===null){bF=c0}return cZ}function A(){var cY;if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}if(cY===null){if(aP.charCodeAt(bF)===59){cY=";";bF++}else{cY=null;if(R===0){ao('";"')}}if(cY===null){if(aP.charCodeAt(bF)===63){cY="?";bF++}else{cY=null;if(R===0){ao('"?"')}}if(cY===null){if(aP.charCodeAt(bF)===47){cY="/";bF++}else{cY=null;if(R===0){ao('"/"')}}}}}}}}}return cY}function af(){var cZ,cY;cZ=[];cY=bY();if(cY===null){cY=V();if(cY===null){if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}}}}}}}while(cY!==null){cZ.push(cY);cY=bY();if(cY===null){cY=V();if(cY===null){if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}}}}}}}}return cZ}function bU(){var c1,cZ,cY;var c2,c0;c2=bF;c1=t();if(c1!==null){c0=bF;if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=ck();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}cZ=cZ!==null?cZ:"";if(cZ!==null){c1=[c1,cZ]}else{c1=null;bF=c2}}else{c1=null;bF=c2}return c1}function t(){var cY;var cZ;cZ=bF;cY=cj();if(cY===null){cY=bX();if(cY===null){cY=aL()}}if(cY!==null){cY=(function(c0){cw.host=aP.substring(bF,c0)})(cZ)}if(cY===null){bF=cZ}return cY}function cj(){var c2,c0,cY;var c3,c1,cZ;c3=bF;c1=bF;c2=[];cZ=bF;c0=bD();if(c0!==null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}while(c0!==null){c2.push(c0);cZ=bF;c0=bD();if(c0!==null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}}if(c2!==null){c0=Z();if(c0!==null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}cY=cY!==null?cY:"";if(cY!==null){c2=[c2,c0,cY]}else{c2=null;bF=c1}}else{c2=null;bF=c1}}else{c2=null;bF=c1}if(c2!==null){c2=(function(c4){cw.host_type="domain";return aP.substring(bF,c4)})(c3)}if(c2===null){bF=c3}return c2}function bD(){var cZ,cY;if(/^[a-zA-Z0-9_\-]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[a-zA-Z0-9_\\-]")}}if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);if(/^[a-zA-Z0-9_\-]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[a-zA-Z0-9_\\-]")}}}}else{cZ=null}return cZ}function Z(){var cZ,cY;if(/^[a-zA-Z_\-]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[a-zA-Z_\\-]")}}if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);if(/^[a-zA-Z_\-]/.test(aP.charAt(bF))){cY=aP.charAt(bF);bF++}else{cY=null;if(R===0){ao("[a-zA-Z_\\-]")}}}}else{cZ=null}return cZ}function aL(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.charCodeAt(bF)===91){c1="[";bF++}else{c1=null;if(R===0){ao('"["')}}if(c1!==null){cZ=aN();if(cZ!==null){if(aP.charCodeAt(bF)===93){cY="]";bF++}else{cY=null;if(R===0){ao('"]"')}}if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){cw.host_type="IPv6";return aP.substring(bF,c3)})(c2)}if(c1===null){bF=c2}return c1}function aN(){var c8,c7,c6,c4,c2,c0,cZ,cY,dd,dc,c5,c3,c1;var db,da,c9;db=bF;da=bF;c8=bS();if(c8!==null){if(aP.charCodeAt(bF)===58){c7=":";bF++}else{c7=null;if(R===0){ao('":"')}}if(c7!==null){c6=bS();if(c6!==null){if(aP.charCodeAt(bF)===58){c4=":";bF++}else{c4=null;if(R===0){ao('":"')}}if(c4!==null){c2=bS();if(c2!==null){if(aP.charCodeAt(bF)===58){c0=":";bF++}else{c0=null;if(R===0){ao('":"')}}if(c0!==null){cZ=bS();if(cZ!==null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY!==null){dd=bS();if(dd!==null){if(aP.charCodeAt(bF)===58){dc=":";bF++}else{dc=null;if(R===0){ao('":"')}}if(dc!==null){c5=bS();if(c5!==null){if(aP.charCodeAt(bF)===58){c3=":";bF++}else{c3=null;if(R===0){ao('":"')}}if(c3!==null){c1=Y();if(c1!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY,dd,dc,c5,c3,c1]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;if(aP.substr(bF,2)==="::"){c8="::";bF+=2}else{c8=null;if(R===0){ao('"::"')}}if(c8!==null){c7=bS();if(c7!==null){if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c0=bS();if(c0!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=bS();if(cY!==null){if(aP.charCodeAt(bF)===58){dd=":";bF++}else{dd=null;if(R===0){ao('":"')}}if(dd!==null){dc=bS();if(dc!==null){if(aP.charCodeAt(bF)===58){c5=":";bF++}else{c5=null;if(R===0){ao('":"')}}if(c5!==null){c3=Y();if(c3!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY,dd,dc,c5,c3]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;if(aP.substr(bF,2)==="::"){c8="::";bF+=2}else{c8=null;if(R===0){ao('"::"')}}if(c8!==null){c7=bS();if(c7!==null){if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c0=bS();if(c0!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=bS();if(cY!==null){if(aP.charCodeAt(bF)===58){dd=":";bF++}else{dd=null;if(R===0){ao('":"')}}if(dd!==null){dc=Y();if(dc!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY,dd,dc]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;if(aP.substr(bF,2)==="::"){c8="::";bF+=2}else{c8=null;if(R===0){ao('"::"')}}if(c8!==null){c7=bS();if(c7!==null){if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c0=bS();if(c0!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=Y();if(cY!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;if(aP.substr(bF,2)==="::"){c8="::";bF+=2}else{c8=null;if(R===0){ao('"::"')}}if(c8!==null){c7=bS();if(c7!==null){if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c0=Y();if(c0!==null){c8=[c8,c7,c6,c4,c2,c0]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;if(aP.substr(bF,2)==="::"){c8="::";bF+=2}else{c8=null;if(R===0){ao('"::"')}}if(c8!==null){c7=bS();if(c7!==null){if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=Y();if(c4!==null){c8=[c8,c7,c6,c4]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;if(aP.substr(bF,2)==="::"){c8="::";bF+=2}else{c8=null;if(R===0){ao('"::"')}}if(c8!==null){c7=Y();if(c7!==null){c8=[c8,c7]}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;if(aP.substr(bF,2)==="::"){c8="::";bF+=2}else{c8=null;if(R===0){ao('"::"')}}if(c8!==null){c7=bS();if(c7!==null){c8=[c8,c7]}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;c8=bS();if(c8!==null){if(aP.substr(bF,2)==="::"){c7="::";bF+=2}else{c7=null;if(R===0){ao('"::"')}}if(c7!==null){c6=bS();if(c6!==null){if(aP.charCodeAt(bF)===58){c4=":";bF++}else{c4=null;if(R===0){ao('":"')}}if(c4!==null){c2=bS();if(c2!==null){if(aP.charCodeAt(bF)===58){c0=":";bF++}else{c0=null;if(R===0){ao('":"')}}if(c0!==null){cZ=bS();if(cZ!==null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY!==null){dd=bS();if(dd!==null){if(aP.charCodeAt(bF)===58){dc=":";bF++}else{dc=null;if(R===0){ao('":"')}}if(dc!==null){c5=Y();if(c5!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY,dd,dc,c5]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;c8=bS();if(c8!==null){c9=bF;if(aP.charCodeAt(bF)===58){c7=":";bF++}else{c7=null;if(R===0){ao('":"')}}if(c7!==null){c6=bS();if(c6!==null){c7=[c7,c6]}else{c7=null;bF=c9}}else{c7=null;bF=c9}c7=c7!==null?c7:"";if(c7!==null){if(aP.substr(bF,2)==="::"){c6="::";bF+=2}else{c6=null;if(R===0){ao('"::"')}}if(c6!==null){c4=bS();if(c4!==null){if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c0=bS();if(c0!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=bS();if(cY!==null){if(aP.charCodeAt(bF)===58){dd=":";bF++}else{dd=null;if(R===0){ao('":"')}}if(dd!==null){dc=Y();if(dc!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY,dd,dc]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;c8=bS();if(c8!==null){c9=bF;if(aP.charCodeAt(bF)===58){c7=":";bF++}else{c7=null;if(R===0){ao('":"')}}if(c7!==null){c6=bS();if(c6!==null){c7=[c7,c6]}else{c7=null;bF=c9}}else{c7=null;bF=c9}c7=c7!==null?c7:"";if(c7!==null){c9=bF;if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){c6=[c6,c4]}else{c6=null;bF=c9}}else{c6=null;bF=c9}c6=c6!==null?c6:"";if(c6!==null){if(aP.substr(bF,2)==="::"){c4="::";bF+=2}else{c4=null;if(R===0){ao('"::"')}}if(c4!==null){c2=bS();if(c2!==null){if(aP.charCodeAt(bF)===58){c0=":";bF++}else{c0=null;if(R===0){ao('":"')}}if(c0!==null){cZ=bS();if(cZ!==null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY!==null){dd=Y();if(dd!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY,dd]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;c8=bS();if(c8!==null){c9=bF;if(aP.charCodeAt(bF)===58){c7=":";bF++}else{c7=null;if(R===0){ao('":"')}}if(c7!==null){c6=bS();if(c6!==null){c7=[c7,c6]}else{c7=null;bF=c9}}else{c7=null;bF=c9}c7=c7!==null?c7:"";if(c7!==null){c9=bF;if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){c6=[c6,c4]}else{c6=null;bF=c9}}else{c6=null;bF=c9}c6=c6!==null?c6:"";if(c6!==null){c9=bF;if(aP.charCodeAt(bF)===58){c4=":";bF++}else{c4=null;if(R===0){ao('":"')}}if(c4!==null){c2=bS();if(c2!==null){c4=[c4,c2]}else{c4=null;bF=c9}}else{c4=null;bF=c9}c4=c4!==null?c4:"";if(c4!==null){if(aP.substr(bF,2)==="::"){c2="::";bF+=2}else{c2=null;if(R===0){ao('"::"')}}if(c2!==null){c0=bS();if(c0!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=Y();if(cY!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;c8=bS();if(c8!==null){c9=bF;if(aP.charCodeAt(bF)===58){c7=":";bF++}else{c7=null;if(R===0){ao('":"')}}if(c7!==null){c6=bS();if(c6!==null){c7=[c7,c6]}else{c7=null;bF=c9}}else{c7=null;bF=c9}c7=c7!==null?c7:"";if(c7!==null){c9=bF;if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){c6=[c6,c4]}else{c6=null;bF=c9}}else{c6=null;bF=c9}c6=c6!==null?c6:"";if(c6!==null){c9=bF;if(aP.charCodeAt(bF)===58){c4=":";bF++}else{c4=null;if(R===0){ao('":"')}}if(c4!==null){c2=bS();if(c2!==null){c4=[c4,c2]}else{c4=null;bF=c9}}else{c4=null;bF=c9}c4=c4!==null?c4:"";if(c4!==null){c9=bF;if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c0=bS();if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c9}}else{c2=null;bF=c9}c2=c2!==null?c2:"";if(c2!==null){if(aP.substr(bF,2)==="::"){c0="::";bF+=2}else{c0=null;if(R===0){ao('"::"')}}if(c0!==null){cZ=Y();if(cZ!==null){c8=[c8,c7,c6,c4,c2,c0,cZ]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;c8=bS();if(c8!==null){c9=bF;if(aP.charCodeAt(bF)===58){c7=":";bF++}else{c7=null;if(R===0){ao('":"')}}if(c7!==null){c6=bS();if(c6!==null){c7=[c7,c6]}else{c7=null;bF=c9}}else{c7=null;bF=c9}c7=c7!==null?c7:"";if(c7!==null){c9=bF;if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){c6=[c6,c4]}else{c6=null;bF=c9}}else{c6=null;bF=c9}c6=c6!==null?c6:"";if(c6!==null){c9=bF;if(aP.charCodeAt(bF)===58){c4=":";bF++}else{c4=null;if(R===0){ao('":"')}}if(c4!==null){c2=bS();if(c2!==null){c4=[c4,c2]}else{c4=null;bF=c9}}else{c4=null;bF=c9}c4=c4!==null?c4:"";if(c4!==null){c9=bF;if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c0=bS();if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c9}}else{c2=null;bF=c9}c2=c2!==null?c2:"";if(c2!==null){c9=bF;if(aP.charCodeAt(bF)===58){c0=":";bF++}else{c0=null;if(R===0){ao('":"')}}if(c0!==null){cZ=bS();if(cZ!==null){c0=[c0,cZ]}else{c0=null;bF=c9}}else{c0=null;bF=c9}c0=c0!==null?c0:"";if(c0!==null){if(aP.substr(bF,2)==="::"){cZ="::";bF+=2}else{cZ=null;if(R===0){ao('"::"')}}if(cZ!==null){cY=bS();if(cY!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}if(c8===null){da=bF;c8=bS();if(c8!==null){c9=bF;if(aP.charCodeAt(bF)===58){c7=":";bF++}else{c7=null;if(R===0){ao('":"')}}if(c7!==null){c6=bS();if(c6!==null){c7=[c7,c6]}else{c7=null;bF=c9}}else{c7=null;bF=c9}c7=c7!==null?c7:"";if(c7!==null){c9=bF;if(aP.charCodeAt(bF)===58){c6=":";bF++}else{c6=null;if(R===0){ao('":"')}}if(c6!==null){c4=bS();if(c4!==null){c6=[c6,c4]}else{c6=null;bF=c9}}else{c6=null;bF=c9}c6=c6!==null?c6:"";if(c6!==null){c9=bF;if(aP.charCodeAt(bF)===58){c4=":";bF++}else{c4=null;if(R===0){ao('":"')}}if(c4!==null){c2=bS();if(c2!==null){c4=[c4,c2]}else{c4=null;bF=c9}}else{c4=null;bF=c9}c4=c4!==null?c4:"";if(c4!==null){c9=bF;if(aP.charCodeAt(bF)===58){c2=":";bF++}else{c2=null;if(R===0){ao('":"')}}if(c2!==null){c0=bS();if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c9}}else{c2=null;bF=c9}c2=c2!==null?c2:"";if(c2!==null){c9=bF;if(aP.charCodeAt(bF)===58){c0=":";bF++}else{c0=null;if(R===0){ao('":"')}}if(c0!==null){cZ=bS();if(cZ!==null){c0=[c0,cZ]}else{c0=null;bF=c9}}else{c0=null;bF=c9}c0=c0!==null?c0:"";if(c0!==null){c9=bF;if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=bS();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c9}}else{cZ=null;bF=c9}cZ=cZ!==null?cZ:"";if(cZ!==null){if(aP.substr(bF,2)==="::"){cY="::";bF+=2}else{cY=null;if(R===0){ao('"::"')}}if(cY!==null){c8=[c8,c7,c6,c4,c2,c0,cZ,cY]}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}else{c8=null;bF=da}}}}}}}}}}}}}}}if(c8!==null){c8=(function(de){cw.host_type="IPv6";return aP.substring(bF,de)})(db)}if(c8===null){bF=db}return c8}function bS(){var c1,c0,cZ,cY;var c2;c2=bF;c1=aT();if(c1!==null){c0=aT();c0=c0!==null?c0:"";if(c0!==null){cZ=aT();cZ=cZ!==null?cZ:"";if(cZ!==null){cY=aT();cY=cY!==null?cY:"";if(cY!==null){c1=[c1,c0,cZ,cY]}else{c1=null;bF=c2}}else{c1=null;bF=c2}}else{c1=null;bF=c2}}else{c1=null;bF=c2}return c1}function Y(){var c0,cZ,cY;var c1;c1=bF;c0=bS();if(c0!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=bS();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}if(c0===null){c0=bX()}return c0}function bX(){var c4,c3,c2,c1,c0,cZ,cY;var c6,c5;c6=bF;c5=bF;c4=b9();if(c4!==null){if(aP.charCodeAt(bF)===46){c3=".";bF++}else{c3=null;if(R===0){ao('"."')}}if(c3!==null){c2=b9();if(c2!==null){if(aP.charCodeAt(bF)===46){c1=".";bF++}else{c1=null;if(R===0){ao('"."')}}if(c1!==null){c0=b9();if(c0!==null){if(aP.charCodeAt(bF)===46){cZ=".";bF++}else{cZ=null;if(R===0){ao('"."')}}if(cZ!==null){cY=b9();if(cY!==null){c4=[c4,c3,c2,c1,c0,cZ,cY]}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}if(c4!==null){c4=(function(c7){cw.host_type="IPv4";return aP.substring(bF,c7)})(c6)}if(c4===null){bF=c6}return c4}function b9(){var c0,cZ,cY;var c1;c1=bF;if(aP.substr(bF,2)==="25"){c0="25";bF+=2}else{c0=null;if(R===0){ao('"25"')}}if(c0!==null){if(/^[0-5]/.test(aP.charAt(bF))){cZ=aP.charAt(bF);bF++}else{cZ=null;if(R===0){ao("[0-5]")}}if(cZ!==null){c0=[c0,cZ]}else{c0=null;bF=c1}}else{c0=null;bF=c1}if(c0===null){c1=bF;if(aP.charCodeAt(bF)===50){c0="2";bF++}else{c0=null;if(R===0){ao('"2"')}}if(c0!==null){if(/^[0-4]/.test(aP.charAt(bF))){cZ=aP.charAt(bF);bF++}else{cZ=null;if(R===0){ao("[0-4]")}}if(cZ!==null){cY=bt();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}if(c0===null){c1=bF;if(aP.charCodeAt(bF)===49){c0="1";bF++}else{c0=null;if(R===0){ao('"1"')}}if(c0!==null){cZ=bt();if(cZ!==null){cY=bt();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}if(c0===null){c1=bF;if(/^[1-9]/.test(aP.charAt(bF))){c0=aP.charAt(bF);bF++}else{c0=null;if(R===0){ao("[1-9]")}}if(c0!==null){cZ=bt();if(cZ!==null){c0=[c0,cZ]}else{c0=null;bF=c1}}else{c0=null;bF=c1}if(c0===null){c0=bt()}}}}return c0}function ck(){var c3,c1,c0,cZ,cY;var c4,c2;c4=bF;c2=bF;c3=bt();c3=c3!==null?c3:"";if(c3!==null){c1=bt();c1=c1!==null?c1:"";if(c1!==null){c0=bt();c0=c0!==null?c0:"";if(c0!==null){cZ=bt();cZ=cZ!==null?cZ:"";if(cZ!==null){cY=bt();cY=cY!==null?cY:"";if(cY!==null){c3=[c3,c1,c0,cZ,cY]}else{c3=null;bF=c2}}else{c3=null;bF=c2}}else{c3=null;bF=c2}}else{c3=null;bF=c2}}else{c3=null;bF=c2}if(c3!==null){c3=(function(c6,c5){c5=parseInt(c5.join(""));cw.port=c5;return c5})(c4,c3)}if(c3===null){bF=c4}return c3}function S(){var c0,cZ,cY;var c1;c0=[];c1=bF;if(aP.charCodeAt(bF)===59){cZ=";";bF++}else{cZ=null;if(R===0){ao('";"')}}if(cZ!==null){cY=an();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;if(aP.charCodeAt(bF)===59){cZ=";";bF++}else{cZ=null;if(R===0){ao('";"')}}if(cZ!==null){cY=an();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}return c0}function an(){var cY;cY=cM();if(cY===null){cY=bu();if(cY===null){cY=cs();if(cY===null){cY=cG();if(cY===null){cY=cJ();if(cY===null){cY=a8();if(cY===null){cY=bo()}}}}}}return cY}function cM(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;if(aP.substr(bF,10)==="transport="){c0="transport=";bF+=10}else{c0=null;if(R===0){ao('"transport="')}}if(c0!==null){if(aP.substr(bF,3)==="udp"){cY="udp";bF+=3}else{cY=null;if(R===0){ao('"udp"')}}if(cY===null){if(aP.substr(bF,3)==="tcp"){cY="tcp";bF+=3}else{cY=null;if(R===0){ao('"tcp"')}}if(cY===null){if(aP.substr(bF,4)==="sctp"){cY="sctp";bF+=4}else{cY=null;if(R===0){ao('"sctp"')}}if(cY===null){if(aP.substr(bF,3)==="tls"){cY="tls";bF+=3}else{cY=null;if(R===0){ao('"tls"')}}if(cY===null){cY=bA()}}}}if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c2,c3){if(!cw.params){cw.params={}}cw.params.transport=c3})(c1,c0[1])}if(c0===null){bF=c1}return c0}function bu(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;if(aP.substr(bF,5)==="user="){c0="user=";bF+=5}else{c0=null;if(R===0){ao('"user="')}}if(c0!==null){if(aP.substr(bF,5)==="phone"){cY="phone";bF+=5}else{cY=null;if(R===0){ao('"phone"')}}if(cY===null){if(aP.substr(bF,2)==="ip"){cY="ip";bF+=2}else{cY=null;if(R===0){ao('"ip"')}}if(cY===null){cY=bA()}}if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c3,c2){if(!cw.params){cw.params={}}cw.params.user=c2})(c1,c0[1])}if(c0===null){bF=c1}return c0}function cs(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;if(aP.substr(bF,7)==="method="){c0="method=";bF+=7}else{c0=null;if(R===0){ao('"method="')}}if(c0!==null){cY=am();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c2,c3){if(!cw.params){cw.params={}}cw.params.method=c3})(c1,c0[1])}if(c0===null){bF=c1}return c0}function cG(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;if(aP.substr(bF,4)==="ttl="){c0="ttl=";bF+=4}else{c0=null;if(R===0){ao('"ttl="')}}if(c0!==null){cY=s();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c3,c2){if(!cw.params){cw.params={}}cw.params.ttl=c2})(c1,c0[1])}if(c0===null){bF=c1}return c0}function cJ(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;if(aP.substr(bF,6)==="maddr="){c0="maddr=";bF+=6}else{c0=null;if(R===0){ao('"maddr="')}}if(c0!==null){cY=t();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}if(c0!==null){c0=(function(c3,c2){if(!cw.params){cw.params={}}cw.params.maddr=c2})(c1,c0[1])}if(c0===null){bF=c1}return c0}function a8(){var cY;var cZ;cZ=bF;if(aP.substr(bF,2)==="lr"){cY="lr";bF+=2}else{cY=null;if(R===0){ao('"lr"')}}if(cY!==null){cY=(function(c1,c0){if(!cw.params){cw.params={}}cw.params.lr=true})(cZ,cY)}if(cY===null){bF=cZ}return cY}function bo(){var c2,c0,cY;var c3,c1,cZ;c3=bF;c1=bF;c2=i();if(c2!==null){cZ=bF;if(aP.charCodeAt(bF)===61){c0="=";bF++}else{c0=null;if(R===0){ao('"="')}}if(c0!==null){cY=b7();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}c0=c0!==null?c0:"";if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c1}}else{c2=null;bF=c1}if(c2!==null){c2=(function(c5,c4){if(!cw.params){cw.params={}}if(c4.length===(bF-c5)){cw.params[c4]=true}else{cw.params[c4]=aP.substring(bF,c5+c4.length+1)}})(c3,c2[0])}if(c2===null){bF=c3}return c2}function i(){var cZ,cY;var c0;c0=bF;cY=bM();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bM()}}else{cZ=null}if(cZ!==null){cZ=(function(c2,c1){return c1.join("")})(c0,cZ)}if(cZ===null){bF=c0}return cZ}function b7(){var cZ,cY;var c0;c0=bF;cY=bM();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bM()}}else{cZ=null}if(cZ!==null){cZ=(function(c2,c1){return c1.join("")})(c0,cZ)}if(cZ===null){bF=c0}return cZ}function bM(){var cY;cY=bz();if(cY===null){cY=bY();if(cY===null){cY=V()}}return cY}function bz(){var cY;if(aP.charCodeAt(bF)===91){cY="[";bF++}else{cY=null;if(R===0){ao('"["')}}if(cY===null){if(aP.charCodeAt(bF)===93){cY="]";bF++}else{cY=null;if(R===0){ao('"]"')}}if(cY===null){if(aP.charCodeAt(bF)===47){cY="/";bF++}else{cY=null;if(R===0){ao('"/"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}}}}}}}return cY}function al(){var c3,c1,c0,cZ,cY;var c4,c2;c4=bF;if(aP.charCodeAt(bF)===63){c3="?";bF++}else{c3=null;if(R===0){ao('"?"')}}if(c3!==null){c1=ci();if(c1!==null){c0=[];c2=bF;if(aP.charCodeAt(bF)===38){cZ="&";bF++}else{cZ=null;if(R===0){ao('"&"')}}if(cZ!==null){cY=ci();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c2}}else{cZ=null;bF=c2}while(cZ!==null){c0.push(cZ);c2=bF;if(aP.charCodeAt(bF)===38){cZ="&";bF++}else{cZ=null;if(R===0){ao('"&"')}}if(cZ!==null){cY=ci();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c2}}else{cZ=null;bF=c2}}if(c0!==null){c3=[c3,c1,c0]}else{c3=null;bF=c4}}else{c3=null;bF=c4}}else{c3=null;bF=c4}return c3}function ci(){var c0,cZ,cY;var c1;c1=bF;c0=ak();if(c0!==null){if(aP.charCodeAt(bF)===61){cZ="=";bF++}else{cZ=null;if(R===0){ao('"="')}}if(cZ!==null){cY=bW();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function ak(){var cZ,cY;cY=bQ();if(cY===null){cY=bY();if(cY===null){cY=V()}}if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bQ();if(cY===null){cY=bY();if(cY===null){cY=V()}}}}else{cZ=null}return cZ}function bW(){var cZ,cY;cZ=[];cY=bQ();if(cY===null){cY=bY();if(cY===null){cY=V()}}while(cY!==null){cZ.push(cY);cY=bQ();if(cY===null){cY=bY();if(cY===null){cY=V()}}}return cZ}function bQ(){var cY;if(aP.charCodeAt(bF)===91){cY="[";bF++}else{cY=null;if(R===0){ao('"["')}}if(cY===null){if(aP.charCodeAt(bF)===93){cY="]";bF++}else{cY=null;if(R===0){ao('"]"')}}if(cY===null){if(aP.charCodeAt(bF)===47){cY="/";bF++}else{cY=null;if(R===0){ao('"/"')}}if(cY===null){if(aP.charCodeAt(bF)===63){cY="?";bF++}else{cY=null;if(R===0){ao('"?"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}}}}}}}return cY}function bZ(){var cY;cY=bf();if(cY===null){cY=cX()}return cY}function cX(){var c2,c1,c0,cZ,cY;var c3;c3=bF;c2=am();if(c2!==null){c1=m();if(c1!==null){c0=bi();if(c0!==null){cZ=m();if(cZ!==null){cY=bd();if(cY!==null){c2=[c2,c1,c0,cZ,cY]}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function bi(){var cY;cY=y();if(cY===null){cY=cC()}return cY}function cC(){var c0,cZ,cY;var c1;c1=bF;c0=bG();if(c0!==null){if(aP.charCodeAt(bF)===58){cZ=":";bF++}else{cZ=null;if(R===0){ao('":"')}}if(cZ!==null){cY=B();if(cY===null){cY=aa()}if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function B(){var c1,cZ,cY;var c2,c0;c2=bF;c1=cz();if(c1===null){c1=cc()}if(c1!==null){c0=bF;if(aP.charCodeAt(bF)===63){cZ="?";bF++}else{cZ=null;if(R===0){ao('"?"')}}if(cZ!==null){cY=b2();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}cZ=cZ!==null?cZ:"";if(cZ!==null){c1=[c1,cZ]}else{c1=null;bF=c2}}else{c1=null;bF=c2}return c1}function cz(){var c0,cZ,cY;var c1;c1=bF;if(aP.substr(bF,2)==="//"){c0="//";bF+=2}else{c0=null;if(R===0){ao('"//"')}}if(c0!==null){cZ=M();if(cZ!==null){cY=cc();cY=cY!==null?cY:"";if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function cc(){var cZ,cY;var c0;c0=bF;if(aP.charCodeAt(bF)===47){cZ="/";bF++}else{cZ=null;if(R===0){ao('"/"')}}if(cZ!==null){cY=aA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}return cZ}function aa(){var c0,cZ,cY;var c1;c1=bF;c0=o();if(c0!==null){cZ=[];cY=Q();while(cY!==null){cZ.push(cY);cY=Q()}if(cZ!==null){c0=[c0,cZ]}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function Q(){var cY;cY=J();if(cY===null){cY=bY();if(cY===null){cY=V()}}return cY}function o(){var cY;cY=bY();if(cY===null){cY=V();if(cY===null){if(aP.charCodeAt(bF)===59){cY=";";bF++}else{cY=null;if(R===0){ao('";"')}}if(cY===null){if(aP.charCodeAt(bF)===63){cY="?";bF++}else{cY=null;if(R===0){ao('"?"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===64){cY="@";bF++}else{cY=null;if(R===0){ao('"@"')}}if(cY===null){if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}}}}}}}}}}}return cY}function aA(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=bE();if(c2!==null){c0=[];c1=bF;if(aP.charCodeAt(bF)===47){cZ="/";bF++}else{cZ=null;if(R===0){ao('"/"')}}if(cZ!==null){cY=bE();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;if(aP.charCodeAt(bF)===47){cZ="/";bF++}else{cZ=null;if(R===0){ao('"/"')}}if(cZ!==null){cY=bE();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function bE(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=[];c0=f();while(c0!==null){c2.push(c0);c0=f()}if(c2!==null){c0=[];c1=bF;if(aP.charCodeAt(bF)===59){cZ=";";bF++}else{cZ=null;if(R===0){ao('";"')}}if(cZ!==null){cY=ba();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;if(aP.charCodeAt(bF)===59){cZ=";";bF++}else{cZ=null;if(R===0){ao('";"')}}if(cZ!==null){cY=ba();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function ba(){var cZ,cY;cZ=[];cY=f();while(cY!==null){cZ.push(cY);cY=f()}return cZ}function f(){var cY;cY=bY();if(cY===null){cY=V();if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===64){cY="@";bF++}else{cY=null;if(R===0){ao('"@"')}}if(cY===null){if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}}}}}}}}}return cY}function bG(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=bC();if(c1!==null){cZ=[];cY=bC();if(cY===null){cY=bt();if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}}}}}while(cY!==null){cZ.push(cY);cY=bC();if(cY===null){cY=bt();if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}if(cY===null){if(aP.charCodeAt(bF)===45){cY="-";bF++}else{cY=null;if(R===0){ao('"-"')}}if(cY===null){if(aP.charCodeAt(bF)===46){cY=".";bF++}else{cY=null;if(R===0){ao('"."')}}}}}}}if(cZ!==null){c1=[c1,cZ]}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3){cw.scheme=aP.substring(bF,c3)})(c2)}if(c1===null){bF=c2}return c1}function M(){var cY;cY=bI();if(cY===null){cY=cA()}return cY}function bI(){var c0,cY;var c1,cZ;c1=bF;cZ=bF;c0=a9();if(c0!==null){if(aP.charCodeAt(bF)===64){cY="@";bF++}else{cY=null;if(R===0){ao('"@"')}}if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}c0=c0!==null?c0:"";if(c0!==null){cY=bU();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}c0=c0!==null?c0:"";return c0}function cA(){var cZ,cY;cY=bY();if(cY===null){cY=V();if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}if(cY===null){if(aP.charCodeAt(bF)===59){cY=";";bF++}else{cY=null;if(R===0){ao('";"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===64){cY="@";bF++}else{cY=null;if(R===0){ao('"@"')}}if(cY===null){if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}}}}}}}}}}if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bY();if(cY===null){cY=V();if(cY===null){if(aP.charCodeAt(bF)===36){cY="$";bF++}else{cY=null;if(R===0){ao('"$"')}}if(cY===null){if(aP.charCodeAt(bF)===44){cY=",";bF++}else{cY=null;if(R===0){ao('","')}}if(cY===null){if(aP.charCodeAt(bF)===59){cY=";";bF++}else{cY=null;if(R===0){ao('";"')}}if(cY===null){if(aP.charCodeAt(bF)===58){cY=":";bF++}else{cY=null;if(R===0){ao('":"')}}if(cY===null){if(aP.charCodeAt(bF)===64){cY="@";bF++}else{cY=null;if(R===0){ao('"@"')}}if(cY===null){if(aP.charCodeAt(bF)===38){cY="&";bF++}else{cY=null;if(R===0){ao('"&"')}}if(cY===null){if(aP.charCodeAt(bF)===61){cY="=";bF++}else{cY=null;if(R===0){ao('"="')}}if(cY===null){if(aP.charCodeAt(bF)===43){cY="+";bF++}else{cY=null;if(R===0){ao('"+"')}}}}}}}}}}}}}else{cZ=null}return cZ}function b2(){var cZ,cY;cZ=[];cY=Q();while(cY!==null){cZ.push(cY);cY=Q()}return cZ}function bd(){var c4,c2,c1,c0,cZ,cY;var c5,c3;c5=bF;c3=bF;if(aP.substr(bF,3)==="SIP"){c4="SIP";bF+=3}else{c4=null;if(R===0){ao('"SIP"')}}if(c4!==null){if(aP.charCodeAt(bF)===47){c2="/";bF++}else{c2=null;if(R===0){ao('"/"')}}if(c2!==null){c0=bt();if(c0!==null){c1=[];while(c0!==null){c1.push(c0);c0=bt()}}else{c1=null}if(c1!==null){if(aP.charCodeAt(bF)===46){c0=".";bF++}else{c0=null;if(R===0){ao('"."')}}if(c0!==null){cY=bt();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bt()}}else{cZ=null}if(cZ!==null){c4=[c4,c2,c1,c0,cZ]}else{c4=null;bF=c3}}else{c4=null;bF=c3}}else{c4=null;bF=c3}}else{c4=null;bF=c3}}else{c4=null;bF=c3}if(c4!==null){c4=(function(c6){cw.sip_version=aP.substring(bF,c6)})(c5)}if(c4===null){bF=c5}return c4}function bP(){var cY;if(aP.substr(bF,6)==="INVITE"){cY="INVITE";bF+=6}else{cY=null;if(R===0){ao('"INVITE"')}}return cY}function ae(){var cY;if(aP.substr(bF,3)==="ACK"){cY="ACK";bF+=3}else{cY=null;if(R===0){ao('"ACK"')}}return cY}function O(){var cY;if(aP.substr(bF,7)==="OPTIONS"){cY="OPTIONS";bF+=7}else{cY=null;if(R===0){ao('"OPTIONS"')}}return cY}function b3(){var cY;if(aP.substr(bF,3)==="BYE"){cY="BYE";bF+=3}else{cY=null;if(R===0){ao('"BYE"')}}return cY}function a2(){var cY;if(aP.substr(bF,6)==="CANCEL"){cY="CANCEL";bF+=6}else{cY=null;if(R===0){ao('"CANCEL"')}}return cY}function aD(){var cY;if(aP.substr(bF,8)==="REGISTER"){cY="REGISTER";bF+=8}else{cY=null;if(R===0){ao('"REGISTER"')}}return cY}function aE(){var cY;if(aP.substr(bF,9)==="SUBSCRIBE"){cY="SUBSCRIBE";bF+=9}else{cY=null;if(R===0){ao('"SUBSCRIBE"')}}return cY}function cd(){var cY;if(aP.substr(bF,6)==="NOTIFY"){cY="NOTIFY";bF+=6}else{cY=null;if(R===0){ao('"NOTIFY"')}}return cY}function am(){var cY;var cZ;cZ=bF;cY=bP();if(cY===null){cY=ae();if(cY===null){cY=O();if(cY===null){cY=b3();if(cY===null){cY=a2();if(cY===null){cY=aD();if(cY===null){cY=aE();if(cY===null){cY=cd();if(cY===null){cY=bA()}}}}}}}}if(cY!==null){cY=(function(c0){cw.method=aP.substring(bF,c0)})(cZ)}if(cY===null){bF=cZ}return cY}function bf(){var c2,c1,c0,cZ,cY;var c3;c3=bF;c2=bd();if(c2!==null){c1=m();if(c1!==null){c0=aw();if(c0!==null){cZ=m();if(cZ!==null){cY=at();if(cY!==null){c2=[c2,c1,c0,cZ,cY]}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function aw(){var cY;var cZ;cZ=bF;cY=cU();if(cY!==null){cY=(function(c0){cw.status_code=aP.substring(bF,c0)})(cZ)}if(cY===null){bF=cZ}return cY}function cU(){var c0,cZ,cY;var c1;c1=bF;c0=bt();if(c0!==null){cZ=bt();if(cZ!==null){cY=bt();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function at(){var cZ,cY;var c0;c0=bF;cZ=[];cY=J();if(cY===null){cY=bY();if(cY===null){cY=V();if(cY===null){cY=bs();if(cY===null){cY=bV();if(cY===null){cY=m();if(cY===null){cY=q()}}}}}}while(cY!==null){cZ.push(cY);cY=J();if(cY===null){cY=bY();if(cY===null){cY=V();if(cY===null){cY=bs();if(cY===null){cY=bV();if(cY===null){cY=m();if(cY===null){cY=q()}}}}}}}if(cZ!==null){cZ=(function(c1){cw.reason_phrase=aP.substring(bF,c1)})(c0)}if(cZ===null){bF=c0}return cZ}function ct(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=bO();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=bO();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=bO();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function ah(){var c2,c0,cY;var c3,c1,cZ;c3=bF;c1=bF;c2=aU();if(c2!==null){cZ=bF;if(aP.charCodeAt(bF)===64){c0="@";bF++}else{c0=null;if(R===0){ao('"@"')}}if(c0!==null){cY=aU();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}c0=c0!==null?c0:"";if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c1}}else{c2=null;bF=c1}if(c2!==null){c2=(function(c4){cw=aP.substring(bF,c4)})(c3)}if(c2===null){bF=c3}return c2}function b8(){var c2,c0,cZ,cY;var c3,c1;c2=aK();if(c2===null){c3=bF;c2=cB();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=cB();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=cB();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}}return c2}function cB(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=aQ();if(c2===null){c2=a3()}if(c2!==null){c0=[];c1=bF;cZ=v();if(cZ!==null){cY=cg();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=v();if(cZ!==null){cY=cg();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function a3(){var c1,c0,cZ,cY;var c2;c2=bF;c1=av();c1=c1!==null?c1:"";if(c1!==null){c0=cu();if(c0!==null){cZ=aQ();if(cZ!==null){cY=aZ();if(cY!==null){c1=[c1,c0,cZ,cY]}else{c1=null;bF=c2}}else{c1=null;bF=c2}}else{c1=null;bF=c2}}else{c1=null;bF=c2}return c1}function aQ(){var cY;cY=y();if(cY===null){cY=cC()}return cY}function cn(){var cY;cY=K();if(cY===null){cY=cC()}return cY}function av(){var c3,c1,cZ,cY;var c4,c2,c0;c4=bF;c2=bF;c3=bA();if(c3!==null){c1=[];c0=bF;cZ=cb();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}while(cZ!==null){c1.push(cZ);c0=bF;cZ=cb();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}}if(c1!==null){c3=[c3,c1]}else{c3=null;bF=c2}}else{c3=null;bF=c2}if(c3===null){c3=cF()}if(c3!==null){c3=(function(c6,c5){cw.display_name=c5})(c4,c3)}if(c3===null){bF=c4}return c3}function cg(){var cY;cY=cv();if(cY===null){cY=aX();if(cY===null){cY=aY()}}return cY}function cv(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.charCodeAt(bF)===113){c1="q";bF++}else{c1=null;if(R===0){ao('"q"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=u();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){if(!cw.params){cw.params={}}cw.params.q=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function aX(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,7)==="expires"){c1="expires";bF+=7}else{c1=null;if(R===0){ao('"expires"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=cV();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){if(!cw.params){cw.params={}}cw.params.expires=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function aY(){var cY;var cZ;cZ=bF;cY=aJ();if(cY!==null){cY=(function(c1,c0){if(!cw.params){cw.params={}}if(c0[1]){cw.params[c0[0]]=c0[1]}else{cw.params[c0[0]]=true}})(cZ,cY)}if(cY===null){bF=cZ}return cY}function cV(){var cZ,cY;var c0;c0=bF;cY=bt();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bt()}}else{cZ=null}if(cZ!==null){cZ=(function(c2,c1){return parseInt(c1.join(""))})(c0,cZ)}if(cZ===null){bF=c0}return cZ}function u(){var c4,c2,c0,cZ,cY;var c5,c3,c1;c5=bF;c3=bF;if(aP.charCodeAt(bF)===48){c4="0";bF++}else{c4=null;if(R===0){ao('"0"')}}if(c4!==null){c1=bF;if(aP.charCodeAt(bF)===46){c2=".";bF++}else{c2=null;if(R===0){ao('"."')}}if(c2!==null){c0=bt();c0=c0!==null?c0:"";if(c0!==null){cZ=bt();cZ=cZ!==null?cZ:"";if(cZ!==null){cY=bt();cY=cY!==null?cY:"";if(cY!==null){c2=[c2,c0,cZ,cY]}else{c2=null;bF=c1}}else{c2=null;bF=c1}}else{c2=null;bF=c1}}else{c2=null;bF=c1}c2=c2!==null?c2:"";if(c2!==null){c4=[c4,c2]}else{c4=null;bF=c3}}else{c4=null;bF=c3}if(c4!==null){c4=(function(c6){return parseFloat(aP.substring(bF,c6))})(c5)}if(c4===null){bF=c5}return c4}function aJ(){var c2,c0,cY;var c3,c1,cZ;c3=bF;c1=bF;c2=bA();if(c2!==null){cZ=bF;c0=bq();if(c0!==null){cY=cQ();if(cY!==null){c0=[c0,cY]}else{c0=null;bF=cZ}}else{c0=null;bF=cZ}c0=c0!==null?c0:"";if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c1}}else{c2=null;bF=c1}if(c2!==null){c2=(function(c6,c5,c4){if(typeof c4==="undefined"){var c4=null}else{c4=c4[1]}return[c5,c4]})(c3,c2[0],c2[1])}if(c2===null){bF=c3}return c2}function cQ(){var cY;cY=bA();if(cY===null){cY=t();if(cY===null){cY=cF()}}return cY}function aM(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=b1();if(c2!==null){c0=[];c1=bF;cZ=v();if(cZ!==null){cY=cS();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=v();if(cZ!==null){cY=cS();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function b1(){var cY;if(aP.substr(bF,6)==="render"){cY="render";bF+=6}else{cY=null;if(R===0){ao('"render"')}}if(cY===null){if(aP.substr(bF,7)==="session"){cY="session";bF+=7}else{cY=null;if(R===0){ao('"session"')}}if(cY===null){if(aP.substr(bF,4)==="icon"){cY="icon";bF+=4}else{cY=null;if(R===0){ao('"icon"')}}if(cY===null){if(aP.substr(bF,5)==="alert"){cY="alert";bF+=5}else{cY=null;if(R===0){ao('"alert"')}}if(cY===null){cY=bA()}}}}return cY}function cS(){var cY;cY=bB();if(cY===null){cY=aJ()}return cY}function bB(){var c0,cZ,cY;var c1;c1=bF;if(aP.substr(bF,8)==="handling"){c0="handling";bF+=8}else{c0=null;if(R===0){ao('"handling"')}}if(c0!==null){cZ=bq();if(cZ!==null){if(aP.substr(bF,8)==="optional"){cY="optional";bF+=8}else{cY=null;if(R===0){ao('"optional"')}}if(cY===null){if(aP.substr(bF,8)==="required"){cY="required";bF+=8}else{cY=null;if(R===0){ao('"required"')}}if(cY===null){cY=bA()}}if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function aH(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=bA();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function ad(){var cZ,cY;var c0;c0=bF;cY=bt();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bt()}}else{cZ=null}if(cZ!==null){cZ=(function(c2,c1){cw=parseInt(c1.join(""))})(c0,cZ)}if(cZ===null){bF=c0}return cZ}function bL(){var cY;var cZ;cZ=bF;cY=ca();if(cY!==null){cY=(function(c0){cw=aP.substring(bF,c0)})(cZ)}if(cY===null){bF=cZ}return cY}function ca(){var c4,c2,c1,c0,cZ,cY;var c5,c3;c5=bF;c4=aS();if(c4!==null){c2=ap();if(c2!==null){c1=I();if(c1!==null){c0=[];c3=bF;cZ=v();if(cZ!==null){cY=bp();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c3}}else{cZ=null;bF=c3}while(cZ!==null){c0.push(cZ);c3=bF;cZ=v();if(cZ!==null){cY=bp();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c3}}else{cZ=null;bF=c3}}if(c0!==null){c4=[c4,c2,c1,c0]}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}return c4}function aS(){var cY;cY=aO();if(cY===null){cY=bT()}return cY}function aO(){var cY;if(aP.substr(bF,4)==="text"){cY="text";bF+=4}else{cY=null;if(R===0){ao('"text"')}}if(cY===null){if(aP.substr(bF,5)==="image"){cY="image";bF+=5}else{cY=null;if(R===0){ao('"image"')}}if(cY===null){if(aP.substr(bF,5)==="audio"){cY="audio";bF+=5}else{cY=null;if(R===0){ao('"audio"')}}if(cY===null){if(aP.substr(bF,5)==="video"){cY="video";bF+=5}else{cY=null;if(R===0){ao('"video"')}}if(cY===null){if(aP.substr(bF,11)==="application"){cY="application";bF+=11}else{cY=null;if(R===0){ao('"application"')}}if(cY===null){cY=h()}}}}}return cY}function bT(){var cY;if(aP.substr(bF,7)==="message"){cY="message";bF+=7}else{cY=null;if(R===0){ao('"message"')}}if(cY===null){if(aP.substr(bF,9)==="multipart"){cY="multipart";bF+=9}else{cY=null;if(R===0){ao('"multipart"')}}if(cY===null){cY=h()}}return cY}function h(){var cY;cY=bA();if(cY===null){cY=a1()}return cY}function a1(){var cZ,cY;var c0;c0=bF;if(aP.substr(bF,2)==="x-"){cZ="x-";bF+=2}else{cZ=null;if(R===0){ao('"x-"')}}if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}return cZ}function I(){var cY;cY=h();if(cY===null){cY=bA()}return cY}function bp(){var c0,cZ,cY;var c1;c1=bF;c0=bA();if(c0!==null){cZ=bq();if(cZ!==null){cY=aj();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function aj(){var cY;cY=bA();if(cY===null){cY=cF()}return cY}function aV(){var c0,cZ,cY;var c1;c1=bF;c0=g();if(c0!==null){cZ=cb();if(cZ!==null){cY=am();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function g(){var cZ,cY;var c0;c0=bF;cY=bt();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bt()}}else{cZ=null}if(cZ!==null){cZ=(function(c2,c1){cw.value=parseInt(c1.join(""))})(c0,cZ)}if(cZ===null){bF=c0}return cZ}function ar(){var cY;var cZ;cZ=bF;cY=cV();if(cY!==null){cY=(function(c1,c0){cw=c0})(cZ,cY)}if(cY===null){bF=cZ}return cY}function bR(){var c3,c1,cZ,cY;var c4,c2,c0;c4=bF;c2=bF;c3=bO();if(c3!==null){c1=[];c0=bF;cZ=v();if(cZ!==null){cY=bK();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}while(cZ!==null){c1.push(cZ);c0=bF;cZ=v();if(cZ!==null){cY=bK();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}}if(c1!==null){c3=[c3,c1]}else{c3=null;bF=c2}}else{c3=null;bF=c2}if(c3!==null){c3=(function(c5,c6){cw.event=c6.join("")})(c4,c3[0])}if(c3===null){bF=c4}return c3}function bO(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=E();if(c2!==null){c0=[];c1=bF;if(aP.charCodeAt(bF)===46){cZ=".";bF++}else{cZ=null;if(R===0){ao('"."')}}if(cZ!==null){cY=E();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;if(aP.charCodeAt(bF)===46){cZ=".";bF++}else{cZ=null;if(R===0){ao('"."')}}if(cZ!==null){cY=E();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function bK(){var cY;var cZ;cZ=bF;cY=aJ();if(cY!==null){cY=(function(c1,c0){if(!cw.params){cw.params={}}if(c0[1]){cw.params[c0[0]]=c0[1]}else{cw.params[c0[0]]=true}})(cZ,cY)}if(cY===null){bF=cZ}return cY}function bb(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=cn();if(c2===null){c2=a3()}if(c2!==null){c0=[];c1=bF;cZ=v();if(cZ!==null){cY=cI();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=v();if(cZ!==null){cY=cI();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function cI(){var cY;cY=aG();if(cY===null){cY=aJ()}return cY}function aG(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,3)==="tag"){c1="tag";bF+=3}else{c1=null;if(R===0){ao('"tag"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=bA();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){cw.tag=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function aW(){var cZ,cY;var c0;c0=bF;cY=bt();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=bt()}}else{cZ=null}if(cZ!==null){cZ=(function(c2,c1){cw=parseInt(c1.join(""))})(c0,cZ)}if(cZ===null){bF=c0}return cZ}function b6(){var cY;var cZ;cZ=bF;cY=cV();if(cY!==null){cY=(function(c1,c0){cw=c0})(cZ,cY)}if(cY===null){bF=cZ}return cY}function cN(){var cY;cY=cR();return cY}function cR(){var c4,c2,c1,c0,cZ,cY;var c5,c3;c5=bF;if(aP.substr(bF,6)==="Digest"){c4="Digest";bF+=6}else{c4=null;if(R===0){ao('"Digest"')}}if(c4!==null){c2=cb();if(c2!==null){c1=cE();if(c1!==null){c0=[];c3=bF;cZ=cf();if(cZ!==null){cY=cE();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c3}}else{cZ=null;bF=c3}while(cZ!==null){c0.push(cZ);c3=bF;cZ=cf();if(cZ!==null){cY=cE();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c3}}else{cZ=null;bF=c3}}if(c0!==null){c4=[c4,c2,c1,c0]}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}if(c4===null){c4=aC()}return c4}function aC(){var c4,c2,c1,c0,cZ,cY;var c5,c3;c5=bF;c4=bA();if(c4!==null){c2=cb();if(c2!==null){c1=n();if(c1!==null){c0=[];c3=bF;cZ=cf();if(cZ!==null){cY=n();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c3}}else{cZ=null;bF=c3}while(cZ!==null){c0.push(cZ);c3=bF;cZ=cf();if(cZ!==null){cY=n();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c3}}else{cZ=null;bF=c3}}if(c0!==null){c4=[c4,c2,c1,c0]}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}return c4}function n(){var c0,cZ,cY;var c1;c1=bF;c0=bA();if(c0!==null){cZ=bq();if(cZ!==null){cY=bA();if(cY===null){cY=cF()}if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function cE(){var cY;cY=bm();if(cY===null){cY=cy();if(cY===null){cY=e();if(cY===null){cY=bN();if(cY===null){cY=bk();if(cY===null){cY=D();if(cY===null){cY=bn();if(cY===null){cY=n()}}}}}}}return cY}function bm(){var c0,cZ,cY;var c1;c1=bF;if(aP.substr(bF,5)==="realm"){c0="realm";bF+=5}else{c0=null;if(R===0){ao('"realm"')}}if(c0!==null){cZ=bq();if(cZ!==null){cY=d();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function d(){var cY;var cZ;cZ=bF;cY=cF();if(cY!==null){cY=(function(c1,c0){cw.realm=c0})(cZ,cY)}if(cY===null){bF=cZ}return cY}function cy(){var c4,c3,c2,c1,c0,cZ,cY;var c6,c5;c6=bF;if(aP.substr(bF,6)==="domain"){c4="domain";bF+=6}else{c4=null;if(R===0){ao('"domain"')}}if(c4!==null){c3=bq();if(c3!==null){c2=r();if(c2!==null){c1=bJ();if(c1!==null){c0=[];c5=bF;cY=m();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=m()}}else{cZ=null}if(cZ!==null){cY=bJ();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c5}}else{cZ=null;bF=c5}while(cZ!==null){c0.push(cZ);c5=bF;cY=m();if(cY!==null){cZ=[];while(cY!==null){cZ.push(cY);cY=m()}}else{cZ=null}if(cZ!==null){cY=bJ();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c5}}else{cZ=null;bF=c5}}if(c0!==null){cZ=br();if(cZ!==null){c4=[c4,c3,c2,c1,c0,cZ]}else{c4=null;bF=c6}}else{c4=null;bF=c6}}else{c4=null;bF=c6}}else{c4=null;bF=c6}}else{c4=null;bF=c6}}else{c4=null;bF=c6}return c4}function bJ(){var cY;cY=cC();if(cY===null){cY=cc()}return cY}function e(){var c0,cZ,cY;var c1;c1=bF;if(aP.substr(bF,5)==="nonce"){c0="nonce";bF+=5}else{c0=null;if(R===0){ao('"nonce"')}}if(c0!==null){cZ=bq();if(cZ!==null){cY=aB();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function aB(){var cY;var cZ;cZ=bF;cY=cF();if(cY!==null){cY=(function(c1,c0){cw.nonce=c0})(cZ,cY)}if(cY===null){bF=cZ}return cY}function bN(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,6)==="opaque"){c1="opaque";bF+=6}else{c1=null;if(R===0){ao('"opaque"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=cF();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){cw.opaque=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function bk(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,5)==="stale"){c1="stale";bF+=5}else{c1=null;if(R===0){ao('"stale"')}}if(c1!==null){cZ=bq();if(cZ!==null){if(aP.substr(bF,4)==="true"){cY="true";bF+=4}else{cY=null;if(R===0){ao('"true"')}}if(cY===null){if(aP.substr(bF,5)==="false"){cY="false";bF+=5}else{cY=null;if(R===0){ao('"false"')}}}if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){cw.stale=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function D(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,9)==="algorithm"){c1="algorithm";bF+=9}else{c1=null;if(R===0){ao('"algorithm"')}}if(c1!==null){cZ=bq();if(cZ!==null){if(aP.substr(bF,3)==="MD5"){cY="MD5";bF+=3}else{cY=null;if(R===0){ao('"MD5"')}}if(cY===null){if(aP.substr(bF,8)==="MD5-sess"){cY="MD5-sess";bF+=8}else{cY=null;if(R===0){ao('"MD5-sess"')}}if(cY===null){cY=bA()}}if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){cw.algorithm=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function bn(){var c4,c3,c2,c1,c0,cZ,cY;var c8,c7,c6,c5;c8=bF;c7=bF;if(aP.substr(bF,3)==="qop"){c4="qop";bF+=3}else{c4=null;if(R===0){ao('"qop"')}}if(c4!==null){c3=bq();if(c3!==null){c2=r();if(c2!==null){c6=bF;c1=F();if(c1!==null){c0=[];c5=bF;if(aP.charCodeAt(bF)===44){cZ=",";bF++}else{cZ=null;if(R===0){ao('","')}}if(cZ!==null){cY=F();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c5}}else{cZ=null;bF=c5}while(cZ!==null){c0.push(cZ);c5=bF;if(aP.charCodeAt(bF)===44){cZ=",";bF++}else{cZ=null;if(R===0){ao('","')}}if(cZ!==null){cY=F();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c5}}else{cZ=null;bF=c5}}if(c0!==null){c1=[c1,c0]}else{c1=null;bF=c6}}else{c1=null;bF=c6}if(c1!==null){c0=br();if(c0!==null){c4=[c4,c3,c2,c1,c0]}else{c4=null;bF=c7}}else{c4=null;bF=c7}}else{c4=null;bF=c7}}else{c4=null;bF=c7}}else{c4=null;bF=c7}if(c4!==null){c4=(function(da,c9){cw.qop=aP.substring(bF-1,da+5)})(c8,c4[3])}if(c4===null){bF=c8}return c4}function F(){var cY;if(aP.substr(bF,8)==="auth-int"){cY="auth-int";bF+=8}else{cY=null;if(R===0){ao('"auth-int"')}}if(cY===null){if(aP.substr(bF,4)==="auth"){cY="auth";bF+=4}else{cY=null;if(R===0){ao('"auth"')}}if(cY===null){cY=bA()}}return cY}function l(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=bA();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function w(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=aI();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=aI();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=aI();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function aI(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=a3();if(c2!==null){c0=[];c1=bF;cZ=v();if(cZ!==null){cY=aJ();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=v();if(cZ!==null){cY=aJ();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function k(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=bA();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function cL(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=az();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=az();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=az();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function az(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=a3();if(c2!==null){c0=[];c1=bF;cZ=v();if(cZ!==null){cY=aJ();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=v();if(cZ!==null){cY=aJ();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function a6(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=bw();if(c2!==null){c0=[];c1=bF;cZ=v();if(cZ!==null){cY=bv();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=v();if(cZ!==null){cY=bv();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function bw(){var cY;var cZ;cZ=bF;if(aP.substr(bF,6)==="active"){cY="active";bF+=6}else{cY=null;if(R===0){ao('"active"')}}if(cY===null){if(aP.substr(bF,7)==="pending"){cY="pending";bF+=7}else{cY=null;if(R===0){ao('"pending"')}}if(cY===null){if(aP.substr(bF,10)==="terminated"){cY="terminated";bF+=10}else{cY=null;if(R===0){ao('"terminated"')}}if(cY===null){cY=bA()}}}if(cY!==null){cY=(function(c0){cw.state=aP.substring(bF,c0)})(cZ)}if(cY===null){bF=cZ}return cY}function bv(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,6)==="reason"){c1="reason";bF+=6}else{c1=null;if(R===0){ao('"reason"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=ac();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){if(typeof c3!=="undefined"){cw.reason=c3}})(c2,c1[2])}if(c1===null){bF=c2}if(c1===null){c2=bF;c0=bF;if(aP.substr(bF,7)==="expires"){c1="expires";bF+=7}else{c1=null;if(R===0){ao('"expires"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=cV();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){if(typeof c3!=="undefined"){cw.expires=c3}})(c2,c1[2])}if(c1===null){bF=c2}if(c1===null){c2=bF;c0=bF;if(aP.substr(bF,11)==="retry_after"){c1="retry_after";bF+=11}else{c1=null;if(R===0){ao('"retry_after"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=cV();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){if(typeof c3!=="undefined"){cw.retry_after=c3}})(c2,c1[2])}if(c1===null){bF=c2}if(c1===null){c2=bF;c1=aJ();if(c1!==null){c1=(function(c4,c3){if(typeof c3!=="undefined"){if(!cw.params){cw.params={}}if(c3[1]){cw.params[c3[0]]=c3[1]}else{cw.params[c3[0]]=true}}})(c2,c1)}if(c1===null){bF=c2}}}}return c1}function ac(){var cY;if(aP.substr(bF,11)==="deactivated"){cY="deactivated";bF+=11}else{cY=null;if(R===0){ao('"deactivated"')}}if(cY===null){if(aP.substr(bF,9)==="probation"){cY="probation";bF+=9}else{cY=null;if(R===0){ao('"probation"')}}if(cY===null){if(aP.substr(bF,8)==="rejected"){cY="rejected";bF+=8}else{cY=null;if(R===0){ao('"rejected"')}}if(cY===null){if(aP.substr(bF,7)==="timeout"){cY="timeout";bF+=7}else{cY=null;if(R===0){ao('"timeout"')}}if(cY===null){if(aP.substr(bF,6)==="giveup"){cY="giveup";bF+=6}else{cY=null;if(R===0){ao('"giveup"')}}if(cY===null){if(aP.substr(bF,10)==="noresource"){cY="noresource";bF+=10}else{cY=null;if(R===0){ao('"noresource"')}}if(cY===null){if(aP.substr(bF,9)==="invariant"){cY="invariant";bF+=9}else{cY=null;if(R===0){ao('"invariant"')}}if(cY===null){cY=bA()}}}}}}}return cY}function G(){var cY;cY=cm();cY=cY!==null?cY:"";return cY}function a0(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=bA();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=bA();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}c2=c2!==null?c2:"";return c2}function ch(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=cn();if(c2===null){c2=a3()}if(c2!==null){c0=[];c1=bF;cZ=v();if(cZ!==null){cY=cq();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=v();if(cZ!==null){cY=cq();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function cq(){var cY;cY=aG();if(cY===null){cY=aJ()}return cY}function ab(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c2=a7();if(c2!==null){c0=[];c1=bF;cZ=cf();if(cZ!==null){cY=a7();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}while(cZ!==null){c0.push(cZ);c1=bF;cZ=cf();if(cZ!==null){cY=a7();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function a7(){var c4,c2,c1,c0,cZ,cY;var c5,c3;c5=bF;c4=bx();if(c4!==null){c2=cb();if(c2!==null){c1=U();if(c1!==null){c0=[];c3=bF;cZ=v();if(cZ!==null){cY=bH();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c3}}else{cZ=null;bF=c3}while(cZ!==null){c0.push(cZ);c3=bF;cZ=v();if(cZ!==null){cY=bH();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c3}}else{cZ=null;bF=c3}}if(c0!==null){c4=[c4,c2,c1,c0]}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}}else{c4=null;bF=c5}return c4}function bH(){var cY;cY=P();if(cY===null){cY=W();if(cY===null){cY=au();if(cY===null){cY=b5();if(cY===null){cY=H();if(cY===null){cY=aJ()}}}}}return cY}function P(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,3)==="ttl"){c1="ttl";bF+=3}else{c1=null;if(R===0){ao('"ttl"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=s();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){cw.ttl=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function W(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,5)==="maddr"){c1="maddr";bF+=5}else{c1=null;if(R===0){ao('"maddr"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=t();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c3,c4){cw.maddr=c4})(c2,c1[2])}if(c1===null){bF=c2}return c1}function au(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,8)==="received"){c1="received";bF+=8}else{c1=null;if(R===0){ao('"received"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=bX();if(cY===null){cY=aN()}if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){cw.received=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function b5(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;if(aP.substr(bF,6)==="branch"){c1="branch";bF+=6}else{c1=null;if(R===0){ao('"branch"')}}if(c1!==null){cZ=bq();if(cZ!==null){cY=bA();if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){cw.branch=c3})(c2,c1[2])}if(c1===null){bF=c2}return c1}function H(){var c3,c1,cZ,cY;var c4,c2,c0;c4=bF;c2=bF;if(aP.substr(bF,5)==="rport"){c3="rport";bF+=5}else{c3=null;if(R===0){ao('"rport"')}}if(c3!==null){c0=bF;c1=bq();if(c1!==null){cZ=[];cY=bt();while(cY!==null){cZ.push(cY);cY=bt()}if(cZ!==null){c1=[c1,cZ]}else{c1=null;bF=c0}}else{c1=null;bF=c0}c1=c1!==null?c1:"";if(c1!==null){c3=[c3,c1]}else{c3=null;bF=c2}}else{c3=null;bF=c2}if(c3!==null){c3=(function(c5){if(typeof response_port!=="undefined"){cw.rport=response_port.join("")}})(c4)}if(c3===null){bF=c4}return c3}function bx(){var c2,c1,c0,cZ,cY;var c3;c3=bF;c2=a5();if(c2!==null){c1=ap();if(c1!==null){c0=bA();if(c0!==null){cZ=ap();if(cZ!==null){cY=c();if(cY!==null){c2=[c2,c1,c0,cZ,cY]}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function a5(){var cY;var cZ;cZ=bF;if(aP.substr(bF,3)==="SIP"){cY="SIP";bF+=3}else{cY=null;if(R===0){ao('"SIP"')}}if(cY===null){cY=bA()}if(cY!==null){cY=(function(c1,c0){cw.protocol=c0})(cZ,cY)}if(cY===null){bF=cZ}return cY}function c(){var cY;var cZ;cZ=bF;if(aP.substr(bF,3)==="UDP"){cY="UDP";bF+=3}else{cY=null;if(R===0){ao('"UDP"')}}if(cY===null){if(aP.substr(bF,3)==="TCP"){cY="TCP";bF+=3}else{cY=null;if(R===0){ao('"TCP"')}}if(cY===null){if(aP.substr(bF,3)==="TLS"){cY="TLS";bF+=3}else{cY=null;if(R===0){ao('"TLS"')}}if(cY===null){if(aP.substr(bF,4)==="SCTP"){cY="SCTP";bF+=4}else{cY=null;if(R===0){ao('"SCTP"')}}if(cY===null){cY=bA()}}}}if(cY!==null){cY=(function(c1,c0){cw.transport=c0})(cZ,cY)}if(cY===null){bF=cZ}return cY}function U(){var c1,cZ,cY;var c2,c0;c2=bF;c1=be();if(c1!==null){c0=bF;cZ=L();if(cZ!==null){cY=ax();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c0}}else{cZ=null;bF=c0}cZ=cZ!==null?cZ:"";if(cZ!==null){c1=[c1,cZ]}else{c1=null;bF=c2}}else{c1=null;bF=c2}return c1}function be(){var cY;var cZ;cZ=bF;cY=cj();if(cY===null){cY=bX();if(cY===null){cY=aL()}}if(cY!==null){cY=(function(c0){cw.host=aP.substring(bF,c0)})(cZ)}if(cY===null){bF=cZ}return cY}function ax(){var c3,c1,c0,cZ,cY;var c4,c2;c4=bF;c2=bF;c3=bt();c3=c3!==null?c3:"";if(c3!==null){c1=bt();c1=c1!==null?c1:"";if(c1!==null){c0=bt();c0=c0!==null?c0:"";if(c0!==null){cZ=bt();cZ=cZ!==null?cZ:"";if(cZ!==null){cY=bt();cY=cY!==null?cY:"";if(cY!==null){c3=[c3,c1,c0,cZ,cY]}else{c3=null;bF=c2}}else{c3=null;bF=c2}}else{c3=null;bF=c2}}else{c3=null;bF=c2}}else{c3=null;bF=c2}if(c3!==null){c3=(function(c6,c5){cw.port=parseInt(c5.join(""))})(c4,c3)}if(c3===null){bF=c4}return c3}function s(){var c1,cZ,cY;var c2,c0;c2=bF;c0=bF;c1=bt();if(c1!==null){cZ=bt();cZ=cZ!==null?cZ:"";if(cZ!==null){cY=bt();cY=cY!==null?cY:"";if(cY!==null){c1=[c1,cZ,cY]}else{c1=null;bF=c0}}else{c1=null;bF=c0}}else{c1=null;bF=c0}if(c1!==null){c1=(function(c4,c3){return parseInt(c3.join(""))})(c2,c1)}if(c1===null){bF=c2}return c1}function b4(){var cY;cY=cR();return cY}function aR(){var c0,cZ,cY;var c1;c1=bF;c0=bA();if(c0!==null){cZ=a4();if(cZ!==null){cY=C();if(cY!==null){c0=[c0,cZ,cY]}else{c0=null;bF=c1}}else{c0=null;bF=c1}}else{c0=null;bF=c1}return c0}function C(){var cZ,cY;cZ=[];cY=bc();if(cY===null){cY=bV();if(cY===null){cY=cb()}}while(cY!==null){cZ.push(cY);cY=bc();if(cY===null){cY=bV();if(cY===null){cY=cb()}}}return cZ}function cp(){var cZ,cY;cZ=[];cY=cx();while(cY!==null){cZ.push(cY);cY=cx()}return cZ}function co(){var c2,c0,cZ,cY;var c3,c1;c3=bF;c1=bF;c2=cP();if(c2!==null){if(aP.charCodeAt(bF)===58){c0=":";bF++}else{c0=null;if(R===0){ao('":"')}}if(c0!==null){c2=[c2,c0]}else{c2=null;bF=c1}}else{c2=null;bF=c1}c2=c2!==null?c2:"";if(c2!==null){c0=cW();if(c0!==null){c1=bF;if(aP.charCodeAt(bF)===64){cZ="@";bF++}else{cZ=null;if(R===0){ao('"@"')}}if(cZ!==null){cY=bU();if(cY!==null){cZ=[cZ,cY]}else{cZ=null;bF=c1}}else{cZ=null;bF=c1}cZ=cZ!==null?cZ:"";if(cZ!==null){cY=S();if(cY!==null){c2=[c2,c0,cZ,cY]}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}}else{c2=null;bF=c3}return c2}function cH(c0){c0.sort();var c1=null;var cZ=[];for(var cY=0;cY<c0.length;cY++){if(c0[cY]!==c1){cZ.push(c0[cY]);c1=c0[cY]}}return cZ}function X(){var cY=1;var c1=1;var c2=false;for(var cZ=0;cZ<Math.max(bF,p);cZ++){var c0=aP.charAt(cZ);if(c0==="\n"){if(!c2){cY++}c1=1;c2=false}else{if(c0==="\r"||c0==="\u2028"||c0==="\u2029"){cY++;c1=1;c2=true}else{c1++;c2=false}}}return{line:cY,column:c1}}var cw={};var N=T[cT]();if(N===null||bF!==aP.length){var cr=Math.max(bF,p);var bg=cr<aP.length?aP.charAt(cr):null;var cO=X();new this.SyntaxError(cH(cK),bg,cr,cO.line,cO.column);return -1}return cw},toSource:function(){return this._source}};a.SyntaxError=function(f,g,h,d,e){function c(k,l){var i,j;switch(k.length){case 0:i="end of input";break;case 1:i=k[0];break;default:i=k.slice(0,k.length-1).join(", ")+" or "+k[k.length-1]}j=l?b(l):"end of input";return"Expected "+i+" but "+j+" found."}this.name="SyntaxError";this.expected=f;this.found=g;this.message=c(f,g);this.offset=h;this.line=d;this.column=e};a.SyntaxError.prototype=Error.prototype;return a})();